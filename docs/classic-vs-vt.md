---
title: Klassische Konsolen-APIs im Vergleich zu virtuellen Terminalsequenzen
description: Beschreibt den Unterschied zwischen der Oberfläche der klassischen Win32-Konsolen-API und dem Konzept der virtuellen Terminalsequenzen, manchmal auch als Escapesequenzen bezeichnet, zum Schreiben von Befehlszeilenanwendungen.
author: miniksa
ms.author: miniksa
ms.topic: conceptual
keywords: Konsole, Terminal, virtuelles Terminal, Escapesequenzen, vt, vt100, Konsolen-API
ms.prod: console
ms.localizationpriority: high
ms.openlocfilehash: 2af1b2e2760df42dc60a991dad1afacf27831ec5
ms.sourcegitcommit: 281eb1469f77ae4fb4c67806898e14eac440522a
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 02/14/2021
ms.locfileid: "100357810"
---
# <a name="classic-console-apis-versus-virtual-terminal-sequences"></a><span data-ttu-id="70602-104">Klassische Konsolen-APIs im Vergleich zu virtuellen Terminalsequenzen</span><span class="sxs-lookup"><span data-stu-id="70602-104">Classic Console APIs versus Virtual Terminal Sequences</span></span>

<span data-ttu-id="70602-105">Unsere Empfehlung besteht darin, die klassische **Windows-Konsolen-API** durch **virtuelle Terminalsequenzen** zu ersetzen.</span><span class="sxs-lookup"><span data-stu-id="70602-105">Our recommendation is to replace the classic **Windows Console API** with **virtual terminal sequences**.</span></span> <span data-ttu-id="70602-106">In diesem Artikel werden die Unterschiede zwischen beiden erläutert und die Gründe für unsere Empfehlung erörtert.</span><span class="sxs-lookup"><span data-stu-id="70602-106">This article will outline the difference between the two and discuss the reasons for our recommendation.</span></span>

## <a name="definitions"></a><span data-ttu-id="70602-107">Definitionen</span><span class="sxs-lookup"><span data-stu-id="70602-107">Definitions</span></span>

<span data-ttu-id="70602-108">Die klassische **[Windows-Konsolen-API](console-functions.md)** -Oberfläche ist als die Reihe funktionaler Schnittstellen der C-Sprache in `kernel32.dll` mit „Console“ im Namen definiert.</span><span class="sxs-lookup"><span data-stu-id="70602-108">The classic **[Windows Console API](console-functions.md)** surface is defined as the series of C language functional interfaces on `kernel32.dll` with "Console" in the name.</span></span>

<span data-ttu-id="70602-109">**[Virtuelle Terminalsequenzen](console-virtual-terminal-sequences.md)** sind definiert als Sprache von Befehlen, die in die Standardein- und Standardausgabestreams eingebettet ist.</span><span class="sxs-lookup"><span data-stu-id="70602-109">**[Virtual terminal sequences](console-virtual-terminal-sequences.md)** is defined as a language of commands that's embedded in the standard input and standard output streams.</span></span> <span data-ttu-id="70602-110">Virtuelle Terminalsequenzen verwenden nicht druckbare Escapezeichen für Signalbefehle, die mit normalem druckbarem Text kombiniert sind.</span><span class="sxs-lookup"><span data-stu-id="70602-110">Virtual terminal sequences use non-printable escape characters for signaling commands interleaved with normal printable text.</span></span>

## <a name="history"></a><span data-ttu-id="70602-111">Verlauf</span><span class="sxs-lookup"><span data-stu-id="70602-111">History</span></span>

<span data-ttu-id="70602-112">Die **Windows-Konsole** bietet eine umfassende API-Oberfläche für Client-Befehlszeilenanwendungen, um sowohl den Ausgabeanzeigepuffer als auch den Benutzereingabepuffer zu manipulieren.</span><span class="sxs-lookup"><span data-stu-id="70602-112">The **Windows Console** provides a broad API surface for client command-line applications to manipulate both the output display buffer and the user input buffer.</span></span> <span data-ttu-id="70602-113">Andere Nicht-Windows-Plattformen haben diesen speziellen, API-gesteuerten Ansatz jedoch nie für Ihre Befehlszeilenumgebungen umgesetzt und sich stattdessen für die Verwendung von virtuellen Terminalsequenzen entschieden, die in die Standardein- und Standardausgabestreams eingebettet werden.</span><span class="sxs-lookup"><span data-stu-id="70602-113">However, other non-Windows platforms have never afforded this specific API-driven approach to their command-line environments, choosing instead to use virtual terminal sequences embedded within the standard input and standard output streams.</span></span> <span data-ttu-id="70602-114">*(Eine Zeit lang hat Microsoft dieses Verhalten auch noch in frühen Versionen von DOS und Windows über einen Treiber namens ANSI.SYS unterstützt.)*</span><span class="sxs-lookup"><span data-stu-id="70602-114">*(For a time, Microsoft supported this behavior too in early editions of DOS and Windows through a driver called ANSI.SYS.)*</span></span>

<span data-ttu-id="70602-115">Im Gegensatz dazu steuern **virtuelle Terminalsequenzen** (in einer Vielzahl von Dialekten) die Vorgänge in der Befehlszeilenumgebung für alle anderen Plattformen.</span><span class="sxs-lookup"><span data-stu-id="70602-115">By contrast, **virtual terminal sequences** (in a variety of dialects) drive the command-line environment operations for  all other platforms.</span></span> <span data-ttu-id="70602-116">Diese Sequenzen basieren auf einem [ECMA-Standard](https://www.ecma-international.org/publications/standards/Ecma-048.htm) und einer Reihe von Erweiterungen von vielen Anbietern, die sich zurückverfolgen lassen bis zu Terminals von DEC (Digital Equipment Corporation) und Tektronix, bis hin zu moderneren und gängigeren Softwareterminals wie [xterm](https://invisible-island.net/xterm/).</span><span class="sxs-lookup"><span data-stu-id="70602-116">These sequences are rooted in an [ECMA Standard](https://www.ecma-international.org/publications/standards/Ecma-048.htm) and series of extensions by many vendors tracing back to Digital Equipment Corporation and Tektronix terminals, through to more modern and common software terminals, like [xterm](https://invisible-island.net/xterm/).</span></span> <span data-ttu-id="70602-117">Es gibt viele Erweiterungen innerhalb der Domäne virtueller Terminalsequenzen, und einige Sequenzen werden weiter verbreitet unterstützt als andere. Es lässt sich aber mit Sicherheit sagen, dass sich die Welt auf diesen Standard als Befehlssprache für Befehlszeilenerfahrungen geeinigt hat, wobei es eine bekannte Teilmenge gibt, die von praktisch jeder Terminal- und Befehlszeilen-Clientanwendung unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="70602-117">Many extensions exist within the virtual terminal sequence domain and some sequences are more widely supported than others, but it is safe to say that the world has standardized on this as the command language for command-line experiences with a well-known subset being supported by virtually every terminal and command-line client application.</span></span>

## <a name="cross-platform-support"></a><span data-ttu-id="70602-118">Plattformübergreifende Unterstützung</span><span class="sxs-lookup"><span data-stu-id="70602-118">Cross-Platform Support</span></span>

<span data-ttu-id="70602-119">**Virtuelle Terminalsequenzen** werden nativ plattformübergreifend unterstützt, sodass sich Terminalanwendungen und Befehlszeilen-Hilfsprogramme leicht zwischen Versionen und Varianten von Betriebssystemen portieren lassen, mit Ausnahme von Windows.</span><span class="sxs-lookup"><span data-stu-id="70602-119">**Virtual terminal sequences** are natively supported across platforms, making terminal applications and command-line utilities easily portable between versions and variations of operating systems, with the exception of Windows.</span></span>

<span data-ttu-id="70602-120">Im Gegensatz dazu werden **Windows-Konsolen-APIs** nur unter Windows unterstützt.</span><span class="sxs-lookup"><span data-stu-id="70602-120">By contrast, **Windows Console APIs** are only supported on Windows.</span></span> <span data-ttu-id="70602-121">Eine umfangreiche Adapter- oder Übersetzungsbibliothek muss für den Einsatz zwischen Windows und dem virtuellen Terminal geschrieben werden, oder umgekehrt, wenn versucht wird, Befehlszeilen-Hilfsprogramme von der einen oder anderen Plattform zu portieren.</span><span class="sxs-lookup"><span data-stu-id="70602-121">An extensive adapter or translation library must be written between Windows and virtual terminal, or vice-versa, when attempting to port command-line utilities from one platform or another.</span></span>

### <a name="remote-access"></a><span data-ttu-id="70602-122">Remotezugriff</span><span class="sxs-lookup"><span data-stu-id="70602-122">Remote Access</span></span>

<span data-ttu-id="70602-123">**Virtuelle Terminalsequenzen** besitzen einen großen Vorteil für den Remotezugriff.</span><span class="sxs-lookup"><span data-stu-id="70602-123">**Virtual terminal sequences** hold a major advantage for remote access.</span></span> <span data-ttu-id="70602-124">Sie benötigen keine zusätzliche Arbeit zu dem, was für das Einrichten einer standardmäßigen Remotebefehlszeilen-Verbindung erforderlich ist, um Remoteprozeduraufrufe zu transportieren oder auszuführen.</span><span class="sxs-lookup"><span data-stu-id="70602-124">They require no additional work to transport, or perform remote procedure calls, over what is required to set up a standard remote command-line connection.</span></span> <span data-ttu-id="70602-125">Es reicht aus, einen ausgehenden mit einem eingehenden Transportkanal (oder einen einzelnen bidirektionalen Kanal) über eine Pipe, einen Socket, eine Datei, einen seriellen Anschluss oder ein beliebiges anderes Gerät zu verbinden, um alle Informationen, die für eine Anwendung erforderlich sind, die diese Sequenzen sendet, vollständig zu einem Remotehost zu transportieren.</span><span class="sxs-lookup"><span data-stu-id="70602-125">Simply connecting an outbound and an inbound transport channel (or a single bidirectional channel) over a pipe, socket, file, serial port, or any other device is sufficient to completely carry all information required for an application speaking these sequences to a remote host.</span></span>

<span data-ttu-id="70602-126">Im Gegensatz dazu konnte man nur auf dem lokalen Computer auf die **Windows-Konsolen-APIs** zugreifen, und für alle Bemühungen, sie remote zu steuern, wäre es erforderlich, über einen einfachen Kanal hinaus eine vollständige Remoteaufruf- und -transport-Schnittstellenschicht zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="70602-126">On the contrary, the **Windows Console APIs** have only been accessible on the local machine and all efforts to remote them would require building an entire remote calling and transport interface layer beyond just a simple channel.</span></span>

### <a name="separation-of-concerns"></a><span data-ttu-id="70602-127">Trennung von Zuständigkeiten</span><span class="sxs-lookup"><span data-stu-id="70602-127">Separation of Concerns</span></span>

<span data-ttu-id="70602-128">Einige **Windows-Konsolen-APIs** bieten Zugriff auf niedriger Ebene auf die Ein- und Ausgabepuffer oder Komfortfunktionen für interaktive Befehlszeilen.</span><span class="sxs-lookup"><span data-stu-id="70602-128">Some **Windows Console APIs** provide low-level access to the input and output buffers or convenience functions for interactive command-lines.</span></span> <span data-ttu-id="70602-129">Dazu können Aliase und Befehlsverläufe zählen, die innerhalb des Konsolensubsystems und der Hostumgebung programmiert sind, anstatt innerhalb der Befehlszeilen-Clientanwendung selbst.</span><span class="sxs-lookup"><span data-stu-id="70602-129">This might include aliases and command history programmed within the console subsystem and host environment, instead of within the command-line client application itself.</span></span>

<span data-ttu-id="70602-130">Im Gegensatz dazu übertragen **andere Plattformen** die Verantwortung für das Speichern des aktuellen Zustands der Anwendung und für Komfortfunktionen auf das Befehlszeilen-Hilfsprogramm oder die Shell selbst.</span><span class="sxs-lookup"><span data-stu-id="70602-130">By contrast, **other platforms** make memory of the current state of the application and convenience functionality the responsibility of the command-line utility or shell itself.</span></span>

<span data-ttu-id="70602-131">Die Art, in der die **Windows-Konsole** diese Aufgabe im Konsolenhost und der API handhabt, beschleunigt und vereinfacht das Schreiben einer Befehlszeilenanwendung mit diesen Funktionen und beseitigt die Notwendigkeit, den Zeichenzustand zu speichern oder Komfortfunktionen für die Bearbeitung zu handhaben.</span><span class="sxs-lookup"><span data-stu-id="70602-131">The **Windows Console** way of handling this responsibility in the console host and API makes it quicker and easier to write a command-line application with these features, removing the responsibility of remembering drawing state or handling editing convenience features.</span></span> <span data-ttu-id="70602-132">Dadurch wird es aber auch aufgrund von Abweichungen bei Implementierungen und Verfügbarkeit nahezu unmöglich, diese Aktivitäten remote platfform-, versions- oder szenarioübergreifend zu verbinden.</span><span class="sxs-lookup"><span data-stu-id="70602-132">However, this makes it nearly impossible to connect those activities remotely across platforms, versions, or scenarios due to variations in implementations and availability.</span></span> <span data-ttu-id="70602-133">Durch diese Art der Verwaltung der Verantwortlichkeiten wird die endgültige interaktive Erfahrung dieser Windows-Befehlszeilenanwendungen auch vollständig abhängig von der Implementierung, den Prioritäten und dem Releasezyklus des Konsolenhosts.</span><span class="sxs-lookup"><span data-stu-id="70602-133">This way of handling responsibility also makes the final interactive experience of these Windows command-line applications completely dependent on the console host's implementation, priorities, and release cycle.</span></span>

<span data-ttu-id="70602-134">Beispielsweise sind erweiterte Funktionen zur Zeilenbearbeitung wie Syntaxhervorhebung und komplexe Auswahl nur möglich, wenn eine Befehlszeilenanwendung die Bearbeitungsaspekte selbst verwaltet.</span><span class="sxs-lookup"><span data-stu-id="70602-134">For example, advanced line editing features, like syntax highlighting and complex selection, are only possible when a command-line application handles editing concerns itself.</span></span> <span data-ttu-id="70602-135">Die Konsole könnte nie über genug Kontext verfügen, um diese Szenarien auf eine allgemeine Weise zu verstehen, wie dies die Clientanwendung kann.</span><span class="sxs-lookup"><span data-stu-id="70602-135">The console could never have enough context to fully understand these scenarios in a broad manner like the client application can.</span></span>

<span data-ttu-id="70602-136">Im Gegensatz dazu verwenden andere Plattformen **virtuelle Terminalsequenzen**, um diese Aktivitäten und die virtuelle Terminalkommunikation selbst durch wiederverwendbare clientseitige Bibliotheken wie [readline](https://tiswww.case.edu/php/chet/readline/rltop.html) und [ncurses](https://invisible-island.net/ncurses/ncurses.html) zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="70602-136">By contrast, other platforms use **virtual terminal sequences** to handle these activities and virtual terminal communication itself through reusable client-side libraries, like [readline](https://tiswww.case.edu/php/chet/readline/rltop.html) and [ncurses](https://invisible-island.net/ncurses/ncurses.html).</span></span> <span data-ttu-id="70602-137">Das abschließende Terminal ist nur für die Anzeige von Informationen und das Empfangen von Eingaben über diesen bidirektionalen Kommunikationskanal verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="70602-137">The final terminal is only responsible for displaying information and receiving input through that bidirectional communication channel.</span></span>

### <a name="wrong-way-verbs"></a><span data-ttu-id="70602-138">Gegenläufige Verben</span><span class="sxs-lookup"><span data-stu-id="70602-138">Wrong-Way Verbs</span></span>

<span data-ttu-id="70602-139">Bei **Windows-Konsolen** können einige Aktionen in den Ein- und Ausgabestreams in (zur natürlichen Richtung) umgekehrter Richtung durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="70602-139">With **Windows Console**, some actions can be performed in the opposite-to-natural direction on the input and output streams.</span></span> <span data-ttu-id="70602-140">Dadurch können Windows-Befehlszeilenanwendungen die Verwaltung ihrer eigenen Puffer vermeiden.</span><span class="sxs-lookup"><span data-stu-id="70602-140">This allows Windows command-line applications to avoid the concern of managing their own buffers.</span></span> <span data-ttu-id="70602-141">Außerdem können Windows-Befehlszeilen-Apps erweiterte Vorgänge ausführen, wie z. B. das Simulieren/Einfügen von Eingaben im Auftrag eines Benutzers oder das Zurücklesen des Verlaufs dessen, was geschrieben wurde.</span><span class="sxs-lookup"><span data-stu-id="70602-141">It also allows Windows command-line apps to perform advanced operations, like simulating/injecting input on behalf of a user, or reading back some of the history of what was written.</span></span>

<span data-ttu-id="70602-142">Während dies zusätzliche Leistungsfähigkeit für Windows-Anwendungen bietet, die in einem bestimmten Benutzerkontext auf einem einzelnen Computer arbeiten, bietet es darüber hinaus einen Vektor, um Sicherheits- und Berechtigungsebenen oder Domänen zu überschreiten, wenn sie in bestimmten Szenarien verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="70602-142">While this provides additional power to Windows applications operating in a specific user-context on a single machine, it also provides a vector to cross security and privilege-levels or domains when used in certain scenarios.</span></span> <span data-ttu-id="70602-143">Zu diesen Szenarien gehören das Arbeiten zwischen Kontexten auf demselben Computer oder kontextübergreifend auf einem anderen Computer oder in einer anderen Umgebung.</span><span class="sxs-lookup"><span data-stu-id="70602-143">Such scenarios include operating between contexts on the same machine, or across contexts to another machine or environment.</span></span>

<span data-ttu-id="70602-144">Andere Plattformen, die **virtuelle Terminalsequenzen** verwenden, lassen diese Aktivität nicht zu.</span><span class="sxs-lookup"><span data-stu-id="70602-144">Other platforms, which use **virtual terminal sequences**, do not allow this activity.</span></span> <span data-ttu-id="70602-145">Die Absicht unserer Empfehlung, von der klassischen Windows-Konsole zu virtuellen Terminalsequenzen zu wechseln, ist es, mit dieser Strategie sowohl Interoperabilität als auch Sicherheitserwägungen zu verbinden.</span><span class="sxs-lookup"><span data-stu-id="70602-145">The intent of our recommendation to transition from classic Windows Console to virtual terminal sequences is to converge with this strategy for both interoperability and security reasons.</span></span>

### <a name="direct-window-access"></a><span data-ttu-id="70602-146">Direkter Fensterzugriff</span><span class="sxs-lookup"><span data-stu-id="70602-146">Direct Window Access</span></span>

<span data-ttu-id="70602-147">Die **Windows-Konsolen-API-Oberfläche** stellt das exakte Fensterhandle für das Hostingfenster bereit.</span><span class="sxs-lookup"><span data-stu-id="70602-147">**Windows Console API surface** provides the exact window handle to the hosting window.</span></span> <span data-ttu-id="70602-148">Dies erlaubt es einem Befehlszeilen-Hilfsprogramm, erweiterte Fenstervorgänge auszuführen, indem die breite Palette von Win32-APIs verwendet wird, die für ein Fensterhandle zulässig sind.</span><span class="sxs-lookup"><span data-stu-id="70602-148">This allows a command-line utility to perform advanced window operations by reaching into the wide gamut of Win32 APIs permitted against a window handle.</span></span> <span data-ttu-id="70602-149">Diese Win32-APIs können den Fensterzustand, den Rahmen, das Symbol und andere Eigenschaften des Fensters bearbeiten.</span><span class="sxs-lookup"><span data-stu-id="70602-149">These Win32 APIs can manipulate the window state, frame, icon, or other properties about the window.</span></span>

<span data-ttu-id="70602-150">Im Gegensatz dazu gibt es auf anderen Plattformen mit **virtuellen Terminalsequenzen** eine kleine Gruppe von Befehlen, die mit Fenstern ausgeführt werden können.</span><span class="sxs-lookup"><span data-stu-id="70602-150">By contrast, on other platforms with **virtual terminal sequences**, there is a narrow set of commands that can be performed against the window.</span></span> <span data-ttu-id="70602-151">Mit diesen Befehlen können z. B. die Fenstergröße geändert oder der Fenstertitel angezeigt werden. Aber sie müssen im selben Band und unter derselben Kontrolle wie der Rest des Streams ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="70602-151">These commands can do things like changing the window size or displayed title, but they must be done in the same band and under the same control as the remainder of the stream.</span></span>

<span data-ttu-id="70602-152">Mit der Weiterentwicklung von Windows haben sich die Sicherheitskontrollen und -einschränkungen für Fensterhandles erhöht.</span><span class="sxs-lookup"><span data-stu-id="70602-152">As Windows has evolved, the security controls and restrictions on window handles have increased.</span></span> <span data-ttu-id="70602-153">Außerdem hat sich die Art und das Vorhandensein eines von Anwendungen adressierbaren Fensterhandles für jedes spezifische Benutzeroberflächenelement entwickelt, insbesondere durch die gestiegene Unterstützung von Geräteformfaktoren und Plattformen.</span><span class="sxs-lookup"><span data-stu-id="70602-153">Additionally, the nature and existence of an application-addressable window handle on any specific user interface element has evolved, especially with the increased support of device form factors and platforms.</span></span> <span data-ttu-id="70602-154">Dadurch wird der direkte Fensterzugriff auf Befehlszeilenanwendungen anfällig, wenn sich die Plattform und die Erfahrungen weiterentwickeln.</span><span class="sxs-lookup"><span data-stu-id="70602-154">This makes direct window access to command-line applications fragile as the platform and experiences evolve.</span></span>

### <a name="unicode"></a><span data-ttu-id="70602-155">Unicode</span><span class="sxs-lookup"><span data-stu-id="70602-155">Unicode</span></span>

<span data-ttu-id="70602-156">UTF-8 ist die akzeptierte Codierung für Unicode-Daten auf fast allen modernen Plattformen, da sie das richtige Gleichgewicht zwischen Portabilität, Speichergröße und Verarbeitungszeit hält.</span><span class="sxs-lookup"><span data-stu-id="70602-156">UTF-8 is the accepted encoding for Unicode data across almost all modern platforms, as it strikes the right balance between portability, storage size and processing time.</span></span> <span data-ttu-id="70602-157">Historisch hat Windows allerdings UTF-16 als primäre Codierung für Unicode-Daten gewählt.</span><span class="sxs-lookup"><span data-stu-id="70602-157">However, Windows historically chose UTF-16 as its primary encoding for Unicode data.</span></span> <span data-ttu-id="70602-158">Die Unterstützung für UTF-8 in Windows wächst beständig, und die Verwendung dieser Unicode-Formate schließt die Verwendung anderer Codierungen nicht aus.</span><span class="sxs-lookup"><span data-stu-id="70602-158">Support for UTF-8 is increasing in Windows and use of these Unicode formats does not preclude the usage of other encodings.</span></span>

<span data-ttu-id="70602-159">Die **Windows-Konsolen** plattform hat alle vorhandenen Codepages und Codierungen unterstützt und wird diese weiterhin unterstützen.</span><span class="sxs-lookup"><span data-stu-id="70602-159">The **Windows Console** platform has supported and will continue to support all existing code pages and encodings.</span></span> <span data-ttu-id="70602-160">Verwenden Sie UTF-16 für maximale Kompatibilität in Windows-Versionen, und führen Sie bei Bedarf eine algorithmische Übersetzungen mit UTF-8 durch.</span><span class="sxs-lookup"><span data-stu-id="70602-160">Use UTF-16 for maximum compatibility across Windows versions and perform algorithmic translation with UTF-8 if necessary.</span></span> <span data-ttu-id="70602-161">Die Unterstützung von UTF-8 für das Konsolensystem wird zurzeit stetig verbessert.</span><span class="sxs-lookup"><span data-stu-id="70602-161">Increased support of UTF-8 is in progress for the console system.</span></span>

<span data-ttu-id="70602-162">Die UTF-16-Unterstützung in der Konsole kann ohne zusätzliche Konfiguration über die _W_-Variante aller Konsolen-APIs verwendet werden. Außerdem ist dies die wahrscheinlichere Wahl bei Anwendungen, die bereits im Umgang mit UTF-16 versiert sind, durch die Kommunikation mit der `wchar_t`- und _W_-Variante anderer Microsoft- und Windows-Plattformfunktionen und -produkte.</span><span class="sxs-lookup"><span data-stu-id="70602-162">UTF-16 support in the console can be utilized with no additional configuration via the _W_ variant of all console APIs and is a more likely choice for applications already well versed in UTF-16 through communication with the `wchar_t` and _W_ variant of other Microsoft and Windows platform functions and products.</span></span>

<span data-ttu-id="70602-163">Die UTF-8-Unterstützung in der Konsole kann über die _A_-Variante von Konsolen-APIs für Konsolenhandles verwendet werden, nachdem die Codepage je nachdem mit der Methode [**SetConsoleOutputCP**](setconsoleoutputcp.md) oder [**SetConsoleCP**](setconsolecp.md) auf `65001` oder `CP_UTF8` festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="70602-163">UTF-8 support in the console can be utilized via the _A_ variant of Console APIs against console handles after setting the codepage to `65001` or `CP_UTF8` with the [**SetConsoleOutputCP**](setconsoleoutputcp.md) and [**SetConsoleCP**](setconsolecp.md) methods, as appropriate.</span></span> <span data-ttu-id="70602-164">Das Festlegen der Codepages im Voraus ist nur erforderlich, wenn der Computer in den Einstellungen für Nicht-Unicode-Anwendungen im Abschnitt „Region“ der Systemsteuerung nicht die Option „Unicode UTF-8 für weltweite Sprachunterstützung verwenden“ ausgewählt hat.</span><span class="sxs-lookup"><span data-stu-id="70602-164">Setting the code pages in advance is only necessary if the machine has not chosen "Use Unicode UTF-8 for worldwide language support" in the settings for Non-Unicode applications in the Region section of the Control Panel.</span></span>

>[!NOTE]
> <span data-ttu-id="70602-165">Ab sofort wird UTF-8 vollständig für den Standardausgabestream mit den Methoden [**WriteConsole**](writeconsole.md) und [**WriteFile**](/windows/win32/api/fileapi/nf-fileapi-writefile) unterstützt.</span><span class="sxs-lookup"><span data-stu-id="70602-165">As of now, UTF-8 is supported fully on the standard output stream with the [**WriteConsole**](writeconsole.md) and [**WriteFile**](/windows/win32/api/fileapi/nf-fileapi-writefile) methods.</span></span> <span data-ttu-id="70602-166">Die Unterstützung für den Eingabestream variiert abhängig vom Eingabemodus und wird im Laufe der Zeit weiter verbessert.</span><span class="sxs-lookup"><span data-stu-id="70602-166">Support on the input stream varies depending on the input mode and will continue to improve over time.</span></span> <span data-ttu-id="70602-167">Insbesondere die standardmäßigen **[„gekocht“](high-level-console-modes.md)** -Modi (cooked) bei Eingaben unterstützen UTF-8 noch nicht vollständig.</span><span class="sxs-lookup"><span data-stu-id="70602-167">Notably the default **["cooked"](high-level-console-modes.md)** modes on input do not fully support UTF-8 yet.</span></span> <span data-ttu-id="70602-168">Den aktuellen Status dieser Arbeit finden Sie unter [**microsoft/terminal#7777**](https://github.com/microsoft/terminal/issues/7777) auf GitHub.</span><span class="sxs-lookup"><span data-stu-id="70602-168">The current status of this work can be found at [**microsoft/terminal#7777**](https://github.com/microsoft/terminal/issues/7777) on GitHub.</span></span> <span data-ttu-id="70602-169">Die Problemumgehung besteht darin, dass Sie den algorithmisch übersetzbaren UTF-16-Code zum Lesen von Eingaben über [**ReadConsoleW**](readconsole.md) oder [**ReadConsoleInputW**](readconsoleinput.md) verwenden, bis die ausstehenden Probleme behoben sind.</span><span class="sxs-lookup"><span data-stu-id="70602-169">The workaround is to use the algorithmically-translatable UTF-16 for reading input through [**ReadConsoleW**](readconsole.md) or [**ReadConsoleInputW**](readconsoleinput.md) until the outstanding issues are resolved.</span></span>

## <a name="recommendations"></a><span data-ttu-id="70602-170">Empfehlungen</span><span class="sxs-lookup"><span data-stu-id="70602-170">Recommendations</span></span>

<span data-ttu-id="70602-171">Für alle neuen und fortdauernden Entwicklungen unter Windows werden **virtuelle Terminalsequenzen** als Interaktionsmethode mit dem Terminal empfohlen.</span><span class="sxs-lookup"><span data-stu-id="70602-171">For all new and ongoing development on Windows, **virtual terminal sequences are recommended** as the way of interacting with the terminal.</span></span> <span data-ttu-id="70602-172">Dadurch konvergieren Windows-Befehlszeilen-Clientanwendungen mit dem Stil der Anwendungsprogrammierung auf allen anderen Plattformen.</span><span class="sxs-lookup"><span data-stu-id="70602-172">This will converge Windows command-line client applications with the style of application programming on all other platforms.</span></span>

### <a name="exceptions-for-using-windows-console-apis"></a><span data-ttu-id="70602-173">Ausnahmen für die Verwendung von Windows-Konsolen-APIs</span><span class="sxs-lookup"><span data-stu-id="70602-173">Exceptions for using Windows Console APIs</span></span>

<span data-ttu-id="70602-174">Es ist **immer noch eine begrenzte Teilmenge der Windows-Konsolen-APIs erforderlich**, um die anfängliche Umgebung einzurichten.</span><span class="sxs-lookup"><span data-stu-id="70602-174">A **limited subset of Windows Console APIs is still necessary** to establish the initial environment.</span></span> <span data-ttu-id="70602-175">Die Windows-Plattform unterscheidet sich weiterhin von anderen hinsichtlich der Handhabung von Prozessen, Signalen, Geräten und Codierungen:</span><span class="sxs-lookup"><span data-stu-id="70602-175">The Windows platform still differs from others in process, signal, device, and encoding handling:</span></span>

- <span data-ttu-id="70602-176">Die Standardhandles für einen Prozess werden weiterhin mit **[GetStdHandle](getstdhandle.md)** und **[SetStdHandle](setstdhandle.md)** gesteuert.</span><span class="sxs-lookup"><span data-stu-id="70602-176">The standard handles to a process will still be controlled with **[GetStdHandle](getstdhandle.md)** and **[SetStdHandle](setstdhandle.md)**.</span></span>

- <span data-ttu-id="70602-177">Die Konfiguration der Konsolenmodi eines Handles zum Abonnieren der Unterstützung für virtuelle Terminalsequenzen wird von **[GetConsoleMode](getconsolemode.md)** und **[SetConsoleMode](setconsolemode.md)** verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="70602-177">Configuration of the console modes on a handle to opt in to Virtual Terminal Sequence support will be handled with **[GetConsoleMode](getconsolemode.md)** and **[SetConsoleMode](setconsolemode.md)**.</span></span>

- <span data-ttu-id="70602-178">Die Deklaration der Codepage- oder UTF-8-Unterstützung wird mit den Methoden [**SetConsoleOutputCP**](setconsoleoutputcp.md) und [**SetConsoleCP**](setconsolecp.md) durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="70602-178">Declaration of code page or UTF-8 support is conducted with [**SetConsoleOutputCP**](setconsoleoutputcp.md) and [**SetConsoleCP**](setconsolecp.md) methods.</span></span>

- <span data-ttu-id="70602-179">[**AllocConsole**](allocconsole.md), [**AttachConsole**](attachconsole.md) und [**FreeConsole**](freeconsole.md) benötigen möglicherweise eine gewisse Ebene der übergreifenden Prozessverwaltung, um einer Konsolengerätesitzung beizutreten oder sie zu verlassen.</span><span class="sxs-lookup"><span data-stu-id="70602-179">Some level of overall process management may be required with the [**AllocConsole**](allocconsole.md), [**AttachConsole**](attachconsole.md) and [**FreeConsole**](freeconsole.md) to join or leave a console device session.</span></span>

- <span data-ttu-id="70602-180">Signale und Signalverarbeitung werden weiterhin mit [**SetConsoleCtrlHandler**](setconsolectrlhandler.md), [**HandlerRoutine**](handlerroutine.md) und [**GenerateConsoleCtrlEvent**](generateconsolectrlevent.md) durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="70602-180">Signals and signal handling will continue to be conducted with [**SetConsoleCtrlHandler**](setconsolectrlhandler.md), [**HandlerRoutine**](handlerroutine.md), and [**GenerateConsoleCtrlEvent**](generateconsolectrlevent.md).</span></span>

- <span data-ttu-id="70602-181">Die Kommunikation mit den Konsolengerätehandles kann mit [**WriteConsoleKonsole**](writeconsole.md) und [**ReadConsole**](readconsole.md) erfolgen.</span><span class="sxs-lookup"><span data-stu-id="70602-181">Communication with the console device handles can be conducted with [**WriteConsole**](writeconsole.md) and [**ReadConsole**](readconsole.md).</span></span> <span data-ttu-id="70602-182">Diese können auch durch Laufzeiten von Programmiersprachen in den Formen von: -C Runtime (CRT) genutzt werden: [Stream-E/A](/cpp/c-runtime-library/stream-i-o) wie **printf**, **scanf**, **putc**, **getc** oder [anderen Ebenen von E/A-Funktionen](/cpp/c-runtime-library/input-and-output).</span><span class="sxs-lookup"><span data-stu-id="70602-182">These may also be leveraged through programming language runtimes in the forms of: - C Runtime (CRT): [Stream I/O](/cpp/c-runtime-library/stream-i-o) like **printf**, **scanf**, **putc**, **getc**, or [other levels of I/O functions](/cpp/c-runtime-library/input-and-output).</span></span>
        <span data-ttu-id="70602-183">- C++-Standardbibliothek (STL): [iostream](/cpp/standard-library/iostream) wie **cout** und **cin**.</span><span class="sxs-lookup"><span data-stu-id="70602-183">- C++ Standard Library (STL): [iostream](/cpp/standard-library/iostream) like **cout** and **cin**.</span></span>
        <span data-ttu-id="70602-184">- .NET-Runtime: [System.Console](/dotnet/api/system.console) wie **Console.WriteLine**.</span><span class="sxs-lookup"><span data-stu-id="70602-184">- .NET Runtime: [System.Console](/dotnet/api/system.console) like **Console.WriteLine**.</span></span>

- <span data-ttu-id="70602-185">Anwendungen, die über Änderungen der Fenstergröße informiert sein müssen, müssen weiterhin [**ReadConsoleInput**](readconsoleinput.md) verwenden, um sie kombiniert mit Schlüsselereignissen zu empfangen, da **ReadConsole** alleine sie verwirft.</span><span class="sxs-lookup"><span data-stu-id="70602-185">Applications that must be aware of window size changes will still need to use [**ReadConsoleInput**](readconsoleinput.md) to receive them interleaved with key events as **ReadConsole** alone will discard them.</span></span>

- <span data-ttu-id="70602-186">Das Herausfinden der Fenstergröße muss weiterhin mit [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) für Anwendungen erfolgen, die versuchen, Spalten oder Raster zu zeichnen oder die Anzeige zu füllen.</span><span class="sxs-lookup"><span data-stu-id="70602-186">Finding the window size must still be performed with [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) for applications attempting to draw columns, grids, or fill the display.</span></span> <span data-ttu-id="70602-187">Fenster- und Puffergröße stimmen in einer [Pseudokonsolen](pseudoconsoles.md)sitzung überein.</span><span class="sxs-lookup"><span data-stu-id="70602-187">Window and buffer size will match in a [pseudoconsole](pseudoconsoles.md) session.</span></span>

## <a name="future-planning-and-pseudoconsole"></a><span data-ttu-id="70602-188">Zukünftige Planung und Pseudokonsole</span><span class="sxs-lookup"><span data-stu-id="70602-188">Future planning and pseudoconsole</span></span>

<span data-ttu-id="70602-189">Es ist nicht geplant, die Windows-Konsolen-APIs von der Plattform zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="70602-189">There are no plans to remove the Windows console APIs from the platform.</span></span>

<span data-ttu-id="70602-190">Im Gegensatz dazu hat der Windows-Konsolenhost die **[Pseudokonsolen](pseudoconsoles.md)** technologie bereitgestellt, um Aufrufe vorhandener Windows-Befehlszeilenanwendungen in virtuelle Terminalsequenzen zu übersetzen und diese remote oder plattformübergreifend an eine andere Hostingumgebung weiterzuleiten.</span><span class="sxs-lookup"><span data-stu-id="70602-190">On the contrary, the Windows Console host has provided the **[pseudoconsole](pseudoconsoles.md)** technology to translate existing Windows command-line application calls into virtual terminal sequences and forward them to another hosting environment remotely or across platforms.</span></span>

<span data-ttu-id="70602-191">Diese Übersetzung ist nicht perfekt.</span><span class="sxs-lookup"><span data-stu-id="70602-191">This translation is not perfect.</span></span> <span data-ttu-id="70602-192">Sie erfordert, dass das Konsolenhostfenster eine simulierte Umgebung dessen aufrechterhält, was Windows dem Benutzer angezeigt hätte.</span><span class="sxs-lookup"><span data-stu-id="70602-192">It requires the console host window to maintain a simulated environment of what Windows would have displayed to the user.</span></span> <span data-ttu-id="70602-193">Anschließend wird ein Replikat dieser simulierten Umgebung in den **Pseudokonsolen** host projiziert.</span><span class="sxs-lookup"><span data-stu-id="70602-193">It then projects a replica of this simulated environment to the **pseudoconsole** host.</span></span> <span data-ttu-id="70602-194">Alle Aufrufe der Windows-Konsolen-API werden innerhalb der simulierten Umgebung betrieben, um die Anforderungen der Legacy-Befehlszeilen-Clientanwendung zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="70602-194">All Windows Console API calls are operated within the simulated environment to serve the needs of the legacy command-line client application.</span></span> <span data-ttu-id="70602-195">Nur die Effekte werden an den letzten Host weitergegeben.</span><span class="sxs-lookup"><span data-stu-id="70602-195">Only the effects are propagated onto the final host.</span></span>

<span data-ttu-id="70602-196">Einer Befehlszeilenanwendung, die vollständige plattformübergreifende Kompatibilität sowie vollständige Unterstützung aller neuen Funktionen und Szenarien sowohl unter Windows als auch an anderer Stelle wünscht, wird daher empfohlen, zu virtuellen Terminalsequenzen zu wechseln und die Architektur der Befehlszeilenanwendungen an alle Plattformen anzupassen.</span><span class="sxs-lookup"><span data-stu-id="70602-196">A command-line application desiring full compatibility across platforms and full support of all new features and scenarios both on Windows and elsewhere is therefore recommended to move to virtual terminal sequences and adjust the architecture of command-line applications to align with all platforms.</span></span>

<span data-ttu-id="70602-197">Weitere Informationen zu diesem Windows-Übergang für Befehlszeilenanwendungen finden Sie in unserer [Ökosystemroadmap](ecosystem-roadmap.md).</span><span class="sxs-lookup"><span data-stu-id="70602-197">More information about this Windows transition for command-line applications can be found on our [ecosystem roadmap](ecosystem-roadmap.md).</span></span>