---
title: Klassische Konsolen-APIs im Vergleich zu virtuellen Terminal Sequenzen
description: Beschreibt den Unterschied zwischen der API-Oberfläche der klassischen Win32-Konsole und dem Konzept der virtuellen Terminal Sequenzen, die manchmal auch als Escapesequenzen bezeichnet werden, zum Schreiben von Befehlszeilen Anwendungen.
author: miniksa
ms.author: miniksa
ms.topic: conceptual
keywords: Konsole, Terminal, virtuelles Terminal, Escape-Sequenzen, VT, VT100, Konsolen-API
ms.prod: console
ms.openlocfilehash: 0fdd39cab5b8f6ca5cc1602c8e68ec7f2a2303ad
ms.sourcegitcommit: 463975e71920908a6bff9a6a7291ddf3736652d5
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 10/30/2020
ms.locfileid: "93039580"
---
# <a name="classic-console-apis-versus-virtual-terminal-sequences"></a><span data-ttu-id="4bf4d-104">Klassische Konsolen-APIs im Vergleich zu virtuellen Terminal Sequenzen</span><span class="sxs-lookup"><span data-stu-id="4bf4d-104">Classic Console APIs versus Virtual Terminal Sequences</span></span>

<span data-ttu-id="4bf4d-105">Unsere Empfehlung besteht darin, die klassische **Windows-Konsolen-API** durch **virtuelle Terminal Sequenzen** zu ersetzen.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-105">Our recommendation is to replace the classic **Windows Console API** with **virtual terminal sequences** .</span></span> <span data-ttu-id="4bf4d-106">In diesem Artikel werden die Unterschiede zwischen den beiden erläutert und die Gründe für unsere Empfehlung erörtert.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-106">This article will outline the difference between the two and discuss the reasons for our recommendation.</span></span>

## <a name="definitions"></a><span data-ttu-id="4bf4d-107">Definitionen</span><span class="sxs-lookup"><span data-stu-id="4bf4d-107">Definitions</span></span>

<span data-ttu-id="4bf4d-108">Die klassische **[API](console-functions.md)** -Oberfläche der Windows-Konsole wird als eine Reihe von funktionsfähigen C-Sprachschnittstellen `kernel32.dll` in mit "Console" im Namen definiert.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-108">The classic **[Windows Console API](console-functions.md)** surface is defined as the series of C language functional interfaces on `kernel32.dll` with "Console" in the name.</span></span>

<span data-ttu-id="4bf4d-109">**[Virtuelle Terminal Sequenzen](console-virtual-terminal-sequences.md)** werden als Sprache von Befehlen definiert, die in die standardmäßigen Eingabe-und Standardausgabestreams eingebettet sind.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-109">**[Virtual terminal sequences](console-virtual-terminal-sequences.md)** is defined as a language of commands that's embedded in the standard input and standard output streams.</span></span> <span data-ttu-id="4bf4d-110">Virtuelle Terminal Sequenzen verwenden nicht druckbare Escapezeichen für Signal Befehle, die mit normalem Druck barem Text verschachtelt sind.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-110">Virtual terminal sequences use non-printable escape characters for signaling commands interleaved with normal printable text.</span></span>

## <a name="history"></a><span data-ttu-id="4bf4d-111">Verlauf</span><span class="sxs-lookup"><span data-stu-id="4bf4d-111">History</span></span>

<span data-ttu-id="4bf4d-112">Die **Windows-Konsole** bietet eine umfassende API-Oberfläche für Client Befehlszeilen Anwendungen, um sowohl den Ausgabe Anzeige Puffer als auch den Benutzereingabe Puffer zu bearbeiten.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-112">The **Windows Console** provides a broad API surface for client command-line applications to manipulate both the output display buffer and the user input buffer.</span></span> <span data-ttu-id="4bf4d-113">Andere nicht-Windows-Plattformen haben diese spezielle API-gesteuerte Vorgehensweise jedoch nie für Ihre Befehlszeilen Umgebungen gewährt, indem Sie stattdessen virtuelle Terminal Sequenzen verwenden, die in den standardmäßigen Eingabe-und Standardausgabestreams eingebettet sind.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-113">However, other non-Windows platforms have never afforded this specific API-driven approach to their command-line environments, choosing instead to use virtual terminal sequences embedded within the standard input and standard output streams.</span></span> <span data-ttu-id="4bf4d-114">*(Für einen Zeitraum hat Microsoft dieses Verhalten auch in frühen Editionen von DOS und Windows über einen Treiber namens "ANSI.SYS" unterstützt.)*</span><span class="sxs-lookup"><span data-stu-id="4bf4d-114">*(For a time, Microsoft supported this behavior too in early editions of DOS and Windows through a driver called ANSI.SYS.)*</span></span>

<span data-ttu-id="4bf4d-115">Im Gegensatz dazu Steuern **virtuelle Terminal Sequenzen** (in einer Vielzahl von Dialekten) die Befehlszeilen-Umgebungs Vorgänge für alle anderen Plattformen.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-115">By contrast, **virtual terminal sequences** (in a variety of dialects) drive the command-line environment operations for  all other platforms.</span></span> <span data-ttu-id="4bf4d-116">Diese Sequenzen basieren auf einem [ECMA-Standard](https://www.ecma-international.org/publications/standards/Ecma-048.htm) und einer Reihe von Erweiterungen, die von vielen Anbietern zurück zur Digital Equipment Corporation und den Tektronix-Terminals, bis hin zu moderneren und allgemeinen Software Terminals, wie [xterm](https://invisible-island.net/xterm/)</span><span class="sxs-lookup"><span data-stu-id="4bf4d-116">These sequences are rooted in an [ECMA Standard](https://www.ecma-international.org/publications/standards/Ecma-048.htm) and series of extensions by many vendors tracing back to Digital Equipment Corporation and Tektronix terminals, through to more modern and common software terminals, like [xterm](https://invisible-island.net/xterm/).</span></span> <span data-ttu-id="4bf4d-117">Viele Erweiterungen sind innerhalb der virtuellen Terminal Sequenz Domäne vorhanden, und einige Sequenzen werden besser unterstützt als andere. es ist jedoch sicher zu sagen, dass die Welt auf diese Weise als Befehlssprache für die Befehlszeilen Umgebung standardisiert ist, bei der eine bekannte Teilmenge von praktisch jeder Terminal-und Befehlszeilen-Client Anwendung unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-117">Many extensions exist within the virtual terminal sequence domain and some sequences are more widely supported than others, but it is safe to say that the world has standardized on this as the command language for command-line experiences with a well-known subset being supported by virtually every terminal and command-line client application.</span></span>

## <a name="cross-platform-support"></a><span data-ttu-id="4bf4d-118">Plattformübergreifende Unterstützung</span><span class="sxs-lookup"><span data-stu-id="4bf4d-118">Cross-Platform Support</span></span>

<span data-ttu-id="4bf4d-119">**Virtuelle Terminal Sequenzen** werden plattformübergreifend unterstützt, sodass Terminalanwendungen und Befehlszeilen Programme Zwischenversionen und Variationen von Betriebssystemen mit Ausnahme von Windows leicht portierbar sind.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-119">**Virtual terminal sequences** are natively supported across platforms, making terminal applications and command-line utilities easily portable between versions and variations of operating systems, with the exception of Windows.</span></span>

<span data-ttu-id="4bf4d-120">Im Gegensatz dazu werden **Windows-Konsolen-APIs** nur unter Windows unterstützt.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-120">By contrast, **Windows Console APIs** are only supported on Windows.</span></span> <span data-ttu-id="4bf4d-121">Ein umfangreicher Adapter oder eine Übersetzungs Bibliothek muss zwischen Windows und dem virtuellen Terminal geschrieben werden, oder umgekehrt, wenn versucht wird, Befehlszeilen-Hilfsprogramme von einer Plattform oder einer anderen Plattform zu portieren.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-121">An extensive adapter or translation library must be written between Windows and virtual terminal, or vice-versa, when attempting to port command-line utilities from one platform or another.</span></span>

### <a name="remote-access"></a><span data-ttu-id="4bf4d-122">Remotezugriff</span><span class="sxs-lookup"><span data-stu-id="4bf4d-122">Remote Access</span></span>

<span data-ttu-id="4bf4d-123">**Virtuelle Terminal Sequenzen** haben einen großen Vorteil für den Remote Zugriff.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-123">**Virtual terminal sequences** hold a major advantage for remote access.</span></span> <span data-ttu-id="4bf4d-124">Sie benötigen keine zusätzliche Arbeit zum transportieren oder Ausführen von Remote Prozedur aufrufen über das, was zum Einrichten einer standardmäßigen Remote-Befehlszeilen Verbindung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-124">They require no additional work to transport, or perform remote procedure calls, over what is required to set up a standard remote command-line connection.</span></span> <span data-ttu-id="4bf4d-125">Die einfache Verbindung eines ausgehenden und eines eingehenden Transport Kanals (oder eines einzelnen bidirektionalen Kanals) über eine Pipe, einen Socket, eine Datei, einen seriellen Anschluss oder ein anderes Gerät reicht aus, um alle Informationen vollständig zu übertragen, die für eine Anwendung erforderlich sind, die diese Sequenzen in einem Remote Host meldet</span><span class="sxs-lookup"><span data-stu-id="4bf4d-125">Simply connecting an outbound and an inbound transport channel (or a single bidirectional channel) over a pipe, socket, file, serial port, or any other device is sufficient to completely carry all information required for an application speaking these sequences to a remote host.</span></span>

<span data-ttu-id="4bf4d-126">Im Gegensatz dazu konnten auf die **Windows-Konsolen-APIs** nur auf dem lokalen Computer zugegriffen werden, und alle Bemühungen, Sie zu Remote machen, mussten eine gesamte Remote Aufruf-und transportschnittstellenschicht über einen einfachen Kanal hinaus entwickeln.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-126">On the contrary, the **Windows Console APIs** have only been accessible on the local machine and all efforts to remote them would require building an entire remote calling and transport interface layer beyond just a simple channel.</span></span>

### <a name="separation-of-concerns"></a><span data-ttu-id="4bf4d-127">Trennung von Zuständigkeiten</span><span class="sxs-lookup"><span data-stu-id="4bf4d-127">Separation of Concerns</span></span>

<span data-ttu-id="4bf4d-128">Einige **Windows-Konsolen-APIs** bieten Zugriff auf niedriger Ebene auf die Eingabe-und Ausgabepuffer oder die Hilfsfunktionen für interaktive Befehlszeilen.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-128">Some **Windows Console APIs** provide low-level access to the input and output buffers or convenience functions for interactive command-lines.</span></span> <span data-ttu-id="4bf4d-129">Dazu zählen möglicherweise Aliase und Befehlsverlauf, die innerhalb des Konsolen Subsystems und der Host Umgebung programmiert sind, anstatt innerhalb der Befehlszeilen Client Anwendung selbst.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-129">This might include aliases and command history programmed within the console subsystem and host environment, instead of within the command-line client application itself.</span></span>

<span data-ttu-id="4bf4d-130">Im Gegensatz dazu machen **andere Plattformen** den Arbeitsspeicher des aktuellen Anwendungs Zustands und die praktische Funktionalität der Aufgabe des Befehlszeilen Dienstprogramms oder der Shell selbst.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-130">By contrast, **other platforms** make memory of the current state of the application and convenience functionality the responsibility of the command-line utility or shell itself.</span></span>

<span data-ttu-id="4bf4d-131">Die **Windows-Konsole** , die diese Verantwortung im Konsolen Host und in der API behandelt, vereinfacht das Schreiben einer Befehlszeilen Anwendung mit diesen Features, sodass sich der Zeichnungs Zustand und die Bearbeitung von Bearbeitungsfunktionen nicht mehr in der Verantwortung befinden.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-131">The **Windows Console** way of handling this responsibility in the console host and API makes it quicker and easier to write a command-line application with these features, removing the responsibility of remembering drawing state or handling editing convenience features.</span></span> <span data-ttu-id="4bf4d-132">Dadurch ist es jedoch nahezu unmöglich, diese Aktivitäten Remote über Plattformen, Versionen oder Szenarien hinweg zu verbinden, aufgrund von Abweichungen in Implementierungen und Verfügbarkeit.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-132">However, this makes it nearly impossible to connect those activities remotely across platforms, versions, or scenarios due to variations in implementations and availability.</span></span> <span data-ttu-id="4bf4d-133">Durch diese Art der Verwaltung der Verantwortlichkeiten wird die endgültige interaktive Darstellung dieser Windows-Befehlszeilen Anwendungen auch vollständig von der Implementierung, den Prioritäten und dem releasecycle des Konsolen Hosts abhängig gemacht.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-133">This way of handling responsibility also makes the final interactive experience of these Windows command-line applications completely dependent on the console host's implementation, priorities, and release cycle.</span></span>

<span data-ttu-id="4bf4d-134">Beispielsweise sind erweiterte Funktionen zur Zeilen Bearbeitung, wie Syntax Hervorhebung und komplexe Auswahl, nur möglich, wenn eine Befehlszeilen Anwendung selbst Bearbeitungs Probleme behandelt.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-134">For example, advanced line editing features, like syntax highlighting and complex selection, are only possible when a command-line application handles editing concerns itself.</span></span> <span data-ttu-id="4bf4d-135">Die Konsole könnte nie genug Kontext haben, um diese Szenarien auf eine weitreichende Weise wie die Client Anwendung vollständig zu verstehen.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-135">The console could never have enough context to fully understand these scenarios in a broad manner like the client application can.</span></span>

<span data-ttu-id="4bf4d-136">Im Gegensatz dazu werden von anderen Plattformen **virtuelle Terminal Sequenzen** verwendet, um diese Aktivitäten und die virtuelle Terminal Kommunikation selbst durch wiederverwendbare Client seitige Bibliotheken, wie z. b. "read [Line](https://tiswww.case.edu/php/chet/readline/rltop.html) " und [ncurrses](https://invisible-island.net/ncurses/ncurses.html),</span><span class="sxs-lookup"><span data-stu-id="4bf4d-136">By contrast, other platforms use **virtual terminal sequences** to handle these activities and virtual terminal communication itself through reusable client-side libraries, like [readline](https://tiswww.case.edu/php/chet/readline/rltop.html) and [ncurses](https://invisible-island.net/ncurses/ncurses.html).</span></span> <span data-ttu-id="4bf4d-137">Das abschließende Terminal ist nur für die Anzeige von Informationen und das Empfangen von Eingaben über den bidirektionalen Kommunikationskanal verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-137">The final terminal is only responsible for displaying information and receiving input through that bidirectional communication channel.</span></span>

### <a name="wrong-way-verbs"></a><span data-ttu-id="4bf4d-138">Wrong-Way Verben</span><span class="sxs-lookup"><span data-stu-id="4bf4d-138">Wrong-Way Verbs</span></span>

<span data-ttu-id="4bf4d-139">Mit der **Windows-Konsole** können einige Aktionen in der Richtung der Eingabe-und Ausgabedaten Ströme in umgekehrter Richtung durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-139">With **Windows Console** , some actions can be performed in the opposite-to-natural direction on the input and output streams.</span></span> <span data-ttu-id="4bf4d-140">Dadurch können Windows-Befehlszeilen Anwendungen die Verwaltung Ihrer eigenen Puffer vermeiden.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-140">This allows Windows command-line applications to avoid the concern of managing their own buffers.</span></span> <span data-ttu-id="4bf4d-141">Außerdem können Windows-Befehlszeilen-apps Erweiterte Vorgänge ausführen, wie z. b. das simulieren/Einfügen von Eingaben im Namen eines Benutzers oder das zurück Lesen eines Teils der geschriebenen Änderungen.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-141">It also allows Windows command-line apps to perform advanced operations, like simulating/injecting input on behalf of a user, or reading back some of the history of what was written.</span></span>

<span data-ttu-id="4bf4d-142">Dies bietet zusätzliche Leistungsfähigkeit für Windows-Anwendungen, die in einem bestimmten Benutzer Kontext auf einem einzelnen Computer ausgeführt werden. Darüber hinaus bietet Sie einen Vektor für Sicherheits-und Berechtigungsebenen oder Domänen, wenn Sie in bestimmten Szenarien verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-142">While this provides additional power to Windows applications operating in a specific user-context on a single machine, it also provides a vector to cross security and privilege-levels or domains when used in certain scenarios.</span></span> <span data-ttu-id="4bf4d-143">Zu diesen Szenarien gehören das Arbeiten zwischen Kontexten auf demselben Computer oder zwischen Kontexten und einem anderen Computer oder einer anderen Umgebung.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-143">Such scenarios include operating between contexts on the same machine, or across contexts to another machine or environment.</span></span>

<span data-ttu-id="4bf4d-144">Diese Aktivität wird von anderen Plattformen, von denen **virtuelle Terminal Sequenzen** verwendet werden, nicht zugelassen.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-144">Other platforms, which use **virtual terminal sequences** , do not allow this activity.</span></span> <span data-ttu-id="4bf4d-145">Der Zweck unserer Empfehlung, von der klassischen Windows-Konsole zu virtuellen Terminal Sequenzen zu wechseln, besteht darin, mit dieser Strategie sowohl für Interoperabilität als auch für Sicherheitszwecke zu konvergieren.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-145">The intent of our recommendation to transition from classic Windows Console to virtual terminal sequences is to converge with this strategy for both interoperability and security reasons.</span></span>

### <a name="direct-window-access"></a><span data-ttu-id="4bf4d-146">Direkter Fenster Zugriff</span><span class="sxs-lookup"><span data-stu-id="4bf4d-146">Direct Window Access</span></span>

<span data-ttu-id="4bf4d-147">Die **Windows-Konsolen-API-Oberfläche** bietet das genaue Fenster Handle für das Hostingfenster.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-147">**Windows Console API surface** provides the exact window handle to the hosting window.</span></span> <span data-ttu-id="4bf4d-148">Dadurch kann ein Befehlszeilen-Hilfsprogramm erweiterte Fenster Vorgänge durchführen, indem es in den weiten Umfang von Win32-APIs gelangt, die für ein Fenster Handle zulässig sind.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-148">This allows a command-line utility to perform advanced window operations by reaching into the wide gamut of Win32 APIs permitted against a window handle.</span></span> <span data-ttu-id="4bf4d-149">Diese Win32-APIs können den Fenster Zustand, den Frame, das Symbol oder andere Eigenschaften des Fensters bearbeiten.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-149">These Win32 APIs can manipulate the window state, frame, icon, or other properties about the window.</span></span>

<span data-ttu-id="4bf4d-150">Im Gegensatz dazu gibt es auf anderen Plattformen mit **virtuellen Terminal Sequenzen** einen schmalen Satz von Befehlen, die für das Fenster ausgeführt werden können.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-150">By contrast, on other platforms with **virtual terminal sequences** , there is a narrow set of commands that can be performed against the window.</span></span> <span data-ttu-id="4bf4d-151">Diese Befehle können Dinge wie das Ändern der Fenstergröße oder des angezeigten Titels ausführen. Sie müssen jedoch im gleichen Band und unter dem gleichen Steuerelement wie der Rest des Streams ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-151">These commands can do things like changing the window size or displayed title, but they must be done in the same band and under the same control as the remainder of the stream.</span></span>

<span data-ttu-id="4bf4d-152">Wenn sich Windows entwickelt hat, haben sich die Sicherheitskontrollen und-Einschränkungen für Fenster Handles verbessert.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-152">As Windows has evolved, the security controls and restrictions on window handles have increased.</span></span> <span data-ttu-id="4bf4d-153">Außerdem wurde die Art und das vorhanden sein eines von der Anwendung adressierbaren Fenster Handles für ein bestimmtes Benutzeroberflächen Element weiterentwickelt, insbesondere bei erhöhter Unterstützung von Geräte Formular Faktoren und-Plattformen.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-153">Additionally, the nature and existence of an application-addressable window handle on any specific user interface element has evolved, especially with the increased support of device form factors and platforms.</span></span> <span data-ttu-id="4bf4d-154">Dadurch wird direkter Fenster Zugriff auf Befehlszeilen Anwendungen anfällig, wenn sich die Plattform und die Erfahrungen weiterentwickeln.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-154">This makes direct window access to command-line applications fragile as the platform and experiences evolve.</span></span>

### <a name="unicode"></a><span data-ttu-id="4bf4d-155">Unicode</span><span class="sxs-lookup"><span data-stu-id="4bf4d-155">Unicode</span></span>

<span data-ttu-id="4bf4d-156">UTF-8 ist die akzeptierte Codierung für Unicode-Daten in fast allen modernen Plattformen, da Sie das richtige Gleichgewicht zwischen Portabilität, Speichergröße und Verarbeitungszeit trifft.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-156">UTF-8 is the accepted encoding for Unicode data across almost all modern platforms, as it strikes the right balance between portability, storage size and processing time.</span></span> <span data-ttu-id="4bf4d-157">Allerdings wählte Windows in der Vergangenheit UTF-16 als primäre Codierung für Unicode-Daten.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-157">However, Windows historically chose UTF-16 as its primary encoding for Unicode data.</span></span> <span data-ttu-id="4bf4d-158">Die Unterstützung für UTF-8 wird in Windows gesteigert, und die Verwendung dieser Unicode-Formate schließt die Verwendung anderer Codierungen nicht aus.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-158">Support for UTF-8 is increasing in Windows and use of these Unicode formats does not preclude the usage of other encodings.</span></span>

<span data-ttu-id="4bf4d-159">Die **Windows-Konsolen** Plattform wird unterstützt und unterstützt weiterhin alle vorhandenen Codepages und Codierungen.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-159">The **Windows Console** platform has supported and will continue to support all existing code pages and encodings.</span></span> <span data-ttu-id="4bf4d-160">Verwenden Sie UTF-16 für die maximale Kompatibilität in Windows-Versionen, und führen Sie bei Bedarf algorithmische Übersetzungen mit UTF-8 aus.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-160">Use UTF-16 for maximum compatibility across Windows versions and perform algorithmic translation with UTF-8 if necessary.</span></span> <span data-ttu-id="4bf4d-161">Die Unterstützung von UTF-8 wird für das Konsolensystem zurzeit ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-161">Increased support of UTF-8 is in progress for the console system.</span></span>

<span data-ttu-id="4bf4d-162">Die UTF-16-Unterstützung in der-Konsole kann ohne zusätzliche Konfiguration über die Variante " _W_ " aller Konsolen-APIs verwendet werden. Außerdem ist es wahrscheinlicher, dass Anwendungen, die sich in UTF-16 über die Kommunikation mit der `wchar_t` und _W_ -Variante anderer Microsoft-und Windows-Plattformfunktionen und-Produkte gut auskennen.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-162">UTF-16 support in the console can be utilized with no additional configuration via the _W_ variant of all console APIs and is a more likely choice for applications already well versed in UTF-16 through communication with the `wchar_t` and _W_ variant of other Microsoft and Windows platform functions and products.</span></span>

<span data-ttu-id="4bf4d-163">UTF-8-Unterstützung in der-Konsole kann über _eine_ Variante der Konsolen-APIs für Konsolen Handles verwendet werden, nachdem die Codepage auf `65001` oder `CP_UTF8` mit den Methoden [**setconsoleoutputcp**](setconsoleoutputcp.md) und [**setconsolecp**](setconsolecp.md) festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-163">UTF-8 support in the console can be utilized via the _A_ variant of Console APIs against console handles after setting the codepage to `65001` or `CP_UTF8` with the [**SetConsoleOutputCP**](setconsoleoutputcp.md) and [**SetConsoleCP**](setconsolecp.md) methods, as appropriate.</span></span> <span data-ttu-id="4bf4d-164">Das Festlegen der Codepages im Voraus ist nur erforderlich, wenn der Computer in den Einstellungen für nicht-Unicode-Anwendungen im Bereich Region der Systemsteuerung nicht die Option "Unicode UTF-8 für die Unterstützung für die weltweite Sprache verwenden" ausgewählt hat.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-164">Setting the code pages in advance is only necessary if the machine has not chosen "Use Unicode UTF-8 for worldwide language support" in the settings for Non-Unicode applications in the Region section of the Control Panel.</span></span>

>[!NOTE]
> <span data-ttu-id="4bf4d-165">Ab jetzt wird UTF-8 vollständig für den Standardausgabestream mit den Methoden " [**Write Console**](writeconsole.md) " und " [**Write File**](https://msdn.microsoft.com/library/windows/desktop/aa365747) " unterstützt.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-165">As of now, UTF-8 is supported fully on the standard output stream with the [**WriteConsole**](writeconsole.md) and [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) methods.</span></span> <span data-ttu-id="4bf4d-166">Die Unterstützung für den Eingabestream variiert abhängig vom Eingabemodus und wird im Laufe der Zeit weiter verbessert.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-166">Support on the input stream varies depending on the input mode and will continue to improve over time.</span></span> <span data-ttu-id="4bf4d-167">Insbesondere werden UTF-8 noch nicht vollständig von den Standard Modi **["gekocht"](high-level-console-modes.md)** unterstützt.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-167">Notably the default **["cooked"](high-level-console-modes.md)** modes on input do not fully support UTF-8 yet.</span></span> <span data-ttu-id="4bf4d-168">Den aktuellen Status dieser Arbeit finden Sie unter [**Microsoft/Terminal # 7777**](https://github.com/microsoft/terminal/issues/7777) auf GitHub.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-168">The current status of this work can be found at [**microsoft/terminal#7777**](https://github.com/microsoft/terminal/issues/7777) on GitHub.</span></span> <span data-ttu-id="4bf4d-169">Die Problem Umgehung besteht darin, dass Sie das algorithmisch übersetzbare UTF-16-Element verwenden, um Eingaben über [**readconsolew**](readconsole.md) oder [**readconsoleinputw**](readconsoleinput.md) zu lesen, bis die ausstehenden Probleme behoben werden.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-169">The workaround is to use the algorithmically-translatable UTF-16 for reading input through [**ReadConsoleW**](readconsole.md) or [**ReadConsoleInputW**](readconsoleinput.md) until the outstanding issues are resolved.</span></span>

## <a name="recommendations"></a><span data-ttu-id="4bf4d-170">Empfehlungen</span><span class="sxs-lookup"><span data-stu-id="4bf4d-170">Recommendations</span></span>

<span data-ttu-id="4bf4d-171">Für alle neuen und fortlaufenden Entwicklungen unter Windows **werden virtuelle Terminal Sequenzen** als Methode für die Interaktion mit dem Terminal empfohlen.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-171">For all new and ongoing development on Windows, **virtual terminal sequences are recommended** as the way of interacting with the terminal.</span></span> <span data-ttu-id="4bf4d-172">Dadurch werden Windows-Befehlszeilen Client Anwendungen mit dem Stil der Anwendungsprogrammierung auf allen anderen Plattformen zusammengeführt.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-172">This will converge Windows command-line client applications with the style of application programming on all other platforms.</span></span>

### <a name="exceptions-for-using-windows-console-apis"></a><span data-ttu-id="4bf4d-173">Ausnahmen für die Verwendung von Windows-Konsolen-APIs</span><span class="sxs-lookup"><span data-stu-id="4bf4d-173">Exceptions for using Windows Console APIs</span></span>

<span data-ttu-id="4bf4d-174">**Es ist immer noch eine begrenzte Teilmenge der Windows-Konsolen-APIs erforderlich** , um die anfängliche Umgebung einzurichten.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-174">A **limited subset of Windows Console APIs is still necessary** to establish the initial environment.</span></span> <span data-ttu-id="4bf4d-175">Die Windows-Plattform unterscheidet sich weiterhin von anderen in Verarbeitung, Signal, Gerät und Codierung:</span><span class="sxs-lookup"><span data-stu-id="4bf4d-175">The Windows platform still differs from others in process, signal, device, and encoding handling:</span></span>

- <span data-ttu-id="4bf4d-176">Die Standard Handles für einen Prozess werden weiterhin mit " **[getstdhandle](getstdhandle.md)** " und " **[setstdhandle](setstdhandle.md)** " gesteuert.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-176">The standard handles to a process will still be controlled with **[GetStdHandle](getstdhandle.md)** and **[SetStdHandle](setstdhandle.md)** .</span></span>

- <span data-ttu-id="4bf4d-177">Die Konfiguration der Konsolen Modi eines Handles zum Abonnieren der Unterstützung virtueller Terminal Sequenzen wird mit **[getconsolemode](getconsolemode.md)** und **[setconsolemode](setconsolemode.md)** behandelt.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-177">Configuration of the console modes on a handle to opt in to Virtual Terminal Sequence support will be handled with **[GetConsoleMode](getconsolemode.md)** and **[SetConsoleMode](setconsolemode.md)** .</span></span>

- <span data-ttu-id="4bf4d-178">Deklaration der Codepage-oder UTF-8-Unterstützung wird mit den Methoden [**setconsoleoutputcp**](setconsoleoutputcp.md) und [**setconsolecp**](setconsolecp.md) durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-178">Declaration of code page or UTF-8 support is conducted with [**SetConsoleOutputCP**](setconsoleoutputcp.md) and [**SetConsoleCP**](setconsolecp.md) methods.</span></span>

- <span data-ttu-id="4bf4d-179">Möglicherweise ist ein gewisses Maß an Prozess Verwaltung erforderlich, wenn die [**zuordenkonsole**](allocconsole.md), [**attachconsole**](attachconsole.md) und [**freeconsole**](freeconsole.md) einer Konsolen Geräte Sitzung beitreten oder diese verlassen.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-179">Some level of overall process management may be required with the [**AllocConsole**](allocconsole.md), [**AttachConsole**](attachconsole.md) and [**FreeConsole**](freeconsole.md) to join or leave a console device session.</span></span>

- <span data-ttu-id="4bf4d-180">Signale und die Signalverarbeitung werden weiterhin mit [**SetConsoleCtrlHandler**](setconsolectrlhandler.md), [**Handlerroutine**](handlerroutine.md)und [**generateconsolectrlevent**](generateconsolectrlevent.md)durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-180">Signals and signal handling will continue to be conducted with [**SetConsoleCtrlHandler**](setconsolectrlhandler.md), [**HandlerRoutine**](handlerroutine.md), and [**GenerateConsoleCtrlEvent**](generateconsolectrlevent.md).</span></span>

- <span data-ttu-id="4bf4d-181">Die Kommunikation mit den Geräte Handles der Konsole kann mit " [**Write Console**](writeconsole.md) " und "read [**Console**](readconsole.md)" durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-181">Communication with the console device handles can be conducted with [**WriteConsole**](writeconsole.md) and [**ReadConsole**](readconsole.md).</span></span> <span data-ttu-id="4bf4d-182">Diese können auch über Laufzeiten der Programmiersprache in den folgenden Formen genutzt werden:-C Runtime (CRT): [Stream](https://docs.microsoft.com/cpp/c-runtime-library/stream-i-o) -e/a wie **printf** , **scanf** , **putc** , **getc** oder [andere Ebenen von e/a-Funktionen](https://docs.microsoft.com/cpp/c-runtime-library/input-and-output).</span><span class="sxs-lookup"><span data-stu-id="4bf4d-182">These may also be leveraged through programming language runtimes in the forms of: - C Runtime (CRT): [Stream I/O](https://docs.microsoft.com/cpp/c-runtime-library/stream-i-o) like **printf** , **scanf** , **putc** , **getc** , or [other levels of I/O functions](https://docs.microsoft.com/cpp/c-runtime-library/input-and-output).</span></span>
        <span data-ttu-id="4bf4d-183">-C++-Standard Bibliothek (STL): [iostream](https://docs.microsoft.com/cpp/standard-library/iostream) wie **cout** und **CIN** .</span><span class="sxs-lookup"><span data-stu-id="4bf4d-183">- C++ Standard Library (STL): [iostream](https://docs.microsoft.com/cpp/standard-library/iostream) like **cout** and **cin** .</span></span>
        <span data-ttu-id="4bf4d-184">-.NET-Runtime: [System. Console](https://docs.microsoft.com/dotnet/api/system.console) wie **Console. Write teline** .</span><span class="sxs-lookup"><span data-stu-id="4bf4d-184">- .NET Runtime: [System.Console](https://docs.microsoft.com/dotnet/api/system.console) like **Console.WriteLine** .</span></span>

- <span data-ttu-id="4bf4d-185">Anwendungen, die sich auf Änderungen der Fenstergröße beziehen müssen, müssen weiterhin " [**leconsoleinput**](readconsoleinput.md) " verwenden, um Sie mit Schlüsselereignissen zu überlappen, da diese von der "read **Console** " allein verworfen werden.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-185">Applications that must be aware of window size changes will still need to use [**ReadConsoleInput**](readconsoleinput.md) to receive them interleaved with key events as **ReadConsole** alone will discard them.</span></span>

- <span data-ttu-id="4bf4d-186">Das Auffinden der Fenstergröße muss immer noch mit [**getconsoleskreenbufferinfo**](getconsolescreenbufferinfo.md) für Anwendungen erfolgen, die versuchen, Spalten, Raster oder die Anzeige zu zeichnen.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-186">Finding the window size must still be performed with [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) for applications attempting to draw columns, grids, or fill the display.</span></span> <span data-ttu-id="4bf4d-187">Die Fenster-und Puffergröße wird in einer [pseudoconsole](pseudoconsoles.md) -Sitzung abgeglichen.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-187">Window and buffer size will match in a [pseudoconsole](pseudoconsoles.md) session.</span></span>

## <a name="future-planning-and-pseudoconsole"></a><span data-ttu-id="4bf4d-188">Zukünftige Planung und pseudoconsole</span><span class="sxs-lookup"><span data-stu-id="4bf4d-188">Future planning and pseudoconsole</span></span>

<span data-ttu-id="4bf4d-189">Es ist nicht geplant, die Windows-Konsolen-APIs von der Plattform zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-189">There are no plans to remove the Windows console APIs from the platform.</span></span>

<span data-ttu-id="4bf4d-190">Im Gegensatz dazu hat der Windows-Konsolen Host die **[pseudoconsole](pseudoconsoles.md)** -Technologie bereitgestellt, um vorhandene Windows-Befehlszeilen Anwendungs Aufrufe in virtuelle Terminal Sequenzen zu übersetzen und diese Remote oder plattformübergreifend an eine andere Host Umgebung weiterzuleiten.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-190">On the contrary, the Windows Console host has provided the **[pseudoconsole](pseudoconsoles.md)** technology to translate existing Windows command-line application calls into virtual terminal sequences and forward them to another hosting environment remotely or across platforms.</span></span>

<span data-ttu-id="4bf4d-191">Diese Übersetzung ist nicht perfekt.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-191">This translation is not perfect.</span></span> <span data-ttu-id="4bf4d-192">Hierfür ist es erforderlich, dass das Konsolen Host Fenster eine simulierte Umgebung beibehält, welche Fenster dem Benutzer angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-192">It requires the console host window to maintain a simulated environment of what Windows would have displayed to the user.</span></span> <span data-ttu-id="4bf4d-193">Anschließend wird ein Replikat dieser simulierten Umgebung auf den **pseudoconsole** -Host projiziert.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-193">It then projects a replica of this simulated environment to the **pseudoconsole** host.</span></span> <span data-ttu-id="4bf4d-194">Alle Aufrufe der Windows-Konsolen-API werden innerhalb der simulierten Umgebung betrieben, um die Anforderungen der Legacy-Befehlszeilen Client Anwendung zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-194">All Windows Console API calls are operated within the simulated environment to serve the needs of the legacy command-line client application.</span></span> <span data-ttu-id="4bf4d-195">Nur die Effekte werden auf den letzten Host weitergegeben.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-195">Only the effects are propagated onto the final host.</span></span>

<span data-ttu-id="4bf4d-196">Eine Befehlszeilen Anwendung, die eine plattformübergreifende vollständige Kompatibilität und vollständige Unterstützung aller neuen Features und Szenarien sowohl unter Windows als auch an anderer Stelle unterstützt, wird daher empfohlen, um zu virtuellen Terminal Sequenzen zu wechseln und die Architektur der Befehlszeilen Anwendungen an alle Plattformen anzupassen.</span><span class="sxs-lookup"><span data-stu-id="4bf4d-196">A command-line application desiring full compatibility across platforms and full support of all new features and scenarios both on Windows and elsewhere is therefore recommended to move to virtual terminal sequences and adjust the architecture of command-line applications to align with all platforms.</span></span>

<span data-ttu-id="4bf4d-197">Weitere Informationen zu diesem Windows-Übergang für Befehlszeilen Anwendungen finden Sie in unserer Roadmap für das [Ökosystem](ecosystem-roadmap.md).</span><span class="sxs-lookup"><span data-stu-id="4bf4d-197">More information about this Windows transition for command-line applications can be found on our [ecosystem roadmap](ecosystem-roadmap.md).</span></span>
