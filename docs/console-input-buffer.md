---
title: Konsoleneingabepuffer
description: Jede Konsole verfügt über einen Eingabepuffer, der eine Warteschlange von Eingabe Ereignisdaten Sätzen enthält.
author: miniksa
ms.author: miniksa
ms.topic: conceptual
keywords: Konsole, Zeichenmodusanwendungen, Befehlszeilenanwendungen, Terminalanwendungen, Konsolen-API
MS-HAID:
- '\_win32\_console\_input\_buffer'
- base.console\_input\_buffer
- consoles.console\_input\_buffer
MSHAttr:
- PreferredSiteName:MSDN
- PreferredLib:/library/windows/desktop
ms.assetid: 6e536658-8a27-478e-82ee-d1e11f351301
ms.openlocfilehash: d5d3604d3d4f2738af01ae1bc051c10af6249c62
ms.sourcegitcommit: 281eb1469f77ae4fb4c67806898e14eac440522a
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 02/14/2021
ms.locfileid: "100358110"
---
# <a name="console-input-buffer"></a><span data-ttu-id="9e85d-104">Konsoleneingabepuffer</span><span class="sxs-lookup"><span data-stu-id="9e85d-104">Console Input Buffer</span></span>

<span data-ttu-id="9e85d-105">Jede Konsole verfügt über einen Eingabepuffer, der eine Warteschlange von Eingabe Ereignisdaten Sätzen enthält.</span><span class="sxs-lookup"><span data-stu-id="9e85d-105">Each console has an input buffer that contains a queue of input event records.</span></span> <span data-ttu-id="9e85d-106">Wenn das Fenster einer Konsole den Tastaturfokus besitzt, formatiert eine Konsole jedes Eingabe Ereignis (z. b. einen einzelnen Tastatur Strich, eine Bewegung der Maus oder einen Mausklick) als Eingabedaten Satz, der im Eingabepuffer der Konsole platziert wird.</span><span class="sxs-lookup"><span data-stu-id="9e85d-106">When a console's window has the keyboard focus, a console formats each input event (such as a single keystroke, a movement of the mouse, or a mouse-button click) as an input record that it places in the console's input buffer.</span></span>

<span data-ttu-id="9e85d-107">Anwendungen können indirekt auf den Eingabepuffer einer Konsole zugreifen, indem Sie die e [/a-Funktionen auf hoher Ebene](high-level-console-input-and-output-functions.md)oder direkt mithilfe der [Konsolen Eingabefunktionen auf niedriger Ebene](low-level-console-input-functions.md)verwenden.</span><span class="sxs-lookup"><span data-stu-id="9e85d-107">Applications can access a console's input buffer indirectly by using the [high-level console I/O functions](high-level-console-input-and-output-functions.md), or directly by using the [low-level console input functions](low-level-console-input-functions.md).</span></span> <span data-ttu-id="9e85d-108">Die Eingabefunktionen auf hoher Ebene filtern und verarbeiten die Daten im Eingabepuffer und geben nur einen Stream von Eingabezeichen zurück.</span><span class="sxs-lookup"><span data-stu-id="9e85d-108">The high-level input functions filter and process the data in the input buffer, returning only a stream of input characters.</span></span> <span data-ttu-id="9e85d-109">Die Eingabefunktionen auf niedriger Ebene ermöglichen es Anwendungen, Eingabedaten Sätze direkt aus dem Eingabepuffer einer Konsole zu lesen oder Eingabedaten Sätze in den Eingabepuffer zu platzieren.</span><span class="sxs-lookup"><span data-stu-id="9e85d-109">The low-level input functions enable applications to read input records directly from a console's input buffer, or to place input records into the input buffer.</span></span> <span data-ttu-id="9e85d-110">Um ein Handle für den Eingabepuffer einer Konsole zu öffnen, geben Sie den Wert von " **$** " in einem aufrufen [**der Funktion "**](/windows/win32/api/fileapi/nf-fileapi-createfilea) Funktion" an.</span><span class="sxs-lookup"><span data-stu-id="9e85d-110">To open a handle to a console's input buffer, specify the **CONIN$** value in a call to the [**CreateFile**](/windows/win32/api/fileapi/nf-fileapi-createfilea) function.</span></span>

<span data-ttu-id="9e85d-111">Ein Eingabedaten Satz ist eine Struktur, die Informationen über den Typ des aufgetretenen Ereignisses (Tastatur, Maus, Fenstergröße, Fokus oder Menü Ereignis) sowie spezifische Details zum Ereignis enthält.</span><span class="sxs-lookup"><span data-stu-id="9e85d-111">An input record is a structure containing information about the type of event that occurred (keyboard, mouse, window resizing, focus, or menu event) as well as specific details about the event.</span></span> <span data-ttu-id="9e85d-112">Der **eventType** -Member in einer [**Eingabe \_ Daten Satz**](input-record-str.md) Struktur gibt an, welcher Ereignistyp im Datensatz enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="9e85d-112">The **EventType** member in an [**INPUT\_RECORD**](input-record-str.md) structure indicates which type of event is contained in the record.</span></span>

<span data-ttu-id="9e85d-113">Fokus-und Menü Ereignisse werden für die interne Verwendung durch das System in den Eingabepuffer einer Konsole eingefügt und sollten von Anwendungen ignoriert werden.</span><span class="sxs-lookup"><span data-stu-id="9e85d-113">Focus and menu events are placed in a console's input buffer for internal use by the system and should be ignored by applications.</span></span>

## <a name="keyboard-events"></a><span data-ttu-id="9e85d-114">Tastaturereignisse</span><span class="sxs-lookup"><span data-stu-id="9e85d-114">Keyboard Events</span></span>

<span data-ttu-id="9e85d-115">Tastatur Ereignisse werden generiert, wenn eine Taste gedrückt oder freigegeben wird. Dies schließt Steuerelement Schlüssel ein.</span><span class="sxs-lookup"><span data-stu-id="9e85d-115">Keyboard events are generated when any key is pressed or released; this includes control keys.</span></span> <span data-ttu-id="9e85d-116">Allerdings hat die Alt-Taste eine besondere Bedeutung für das System, wenn es gedrückt und freigegeben wird, ohne mit einem anderen Zeichen kombiniert zu werden, und es nicht an die Anwendung übermittelt wird.</span><span class="sxs-lookup"><span data-stu-id="9e85d-116">However, the ALT key has special meaning to the system when pressed and released without being combined with another character, and it is not passed through to the application.</span></span> <span data-ttu-id="9e85d-117">Außerdem wird die Tastenkombination STRG + C nicht durchlaufen, wenn sich das Eingabe Handle im verarbeiteten Modus befindet.</span><span class="sxs-lookup"><span data-stu-id="9e85d-117">Also, the CTRL+C key combination is not passed through if the input handle is in processed mode.</span></span>

<span data-ttu-id="9e85d-118">Wenn das Eingabe Ereignis eine Tastatureingabe ist, ist das **Ereignismember** im [**Eingabe \_ Daten Satz**](input-record-str.md) eine [**Key- \_ Ereignis \_ Daten Satz**](key-event-record-str.md) Struktur, die die folgenden Informationen enthält:</span><span class="sxs-lookup"><span data-stu-id="9e85d-118">If the input event is a keystroke, the **Event** member in [**INPUT\_RECORD**](input-record-str.md) is a [**KEY\_EVENT\_RECORD**](key-event-record-str.md) structure containing the following information:</span></span>

- <span data-ttu-id="9e85d-119">Ein boolescher Wert, der angibt, ob der Schlüssel gedrückt oder freigegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="9e85d-119">A Boolean value indicating whether the key was pressed or released.</span></span>
- <span data-ttu-id="9e85d-120">Eine Wiederholungs Anzahl, die größer als 1 sein kann, wenn eine Taste angehalten wird.</span><span class="sxs-lookup"><span data-stu-id="9e85d-120">A repeat count that can be greater than one when a key is held down.</span></span>
- <span data-ttu-id="9e85d-121">Der Code des virtuellen Schlüssels, der den angegebenen Schlüssel Geräte unabhängig identifiziert.</span><span class="sxs-lookup"><span data-stu-id="9e85d-121">The virtual-key code, identifying the given key in a device-independent manner.</span></span>
- <span data-ttu-id="9e85d-122">Der Code für die virtuelle Überprüfung, der den von der Tastatur Hardware generierten geräteabhängigen Wert angibt.</span><span class="sxs-lookup"><span data-stu-id="9e85d-122">The virtual-scan code, indicating the device-dependent value generated by the keyboard hardware.</span></span>
- <span data-ttu-id="9e85d-123">Der übersetzte Unicode-™ oder ANSI-Zeichen.</span><span class="sxs-lookup"><span data-stu-id="9e85d-123">The translated Unicode™ or ANSI character.</span></span>
- <span data-ttu-id="9e85d-124">Eine Flagvariable, die den Zustand der Steuerelement Tasten (alt, STRG, Umschalttaste, num-Sperre, Scrollsperre und Feststell Taste) angibt und angibt, ob eine erweiterte Taste gedrückt wurde.</span><span class="sxs-lookup"><span data-stu-id="9e85d-124">A flag variable indicating the state of the control keys (the ALT, CTRL, SHIFT, NUM LOCK, SCROLL LOCK, and CAPS LOCK keys) and indicating whether an enhanced key was pressed.</span></span> <span data-ttu-id="9e85d-125">Erweiterte Schlüssel für die Tastaturen IBM® 101-Key und 102-Key sind die Tastatur ins, del, Home, Ende, Bild-ab, nach-unten und Pfeiltasten in den Clustern links neben der numerischen Tastatur und die Unterteilung (/) und EINGABETASTE in der numerischen Tastatur.</span><span class="sxs-lookup"><span data-stu-id="9e85d-125">Enhanced keys for the IBM® 101-key and 102-key keyboards are the INS, DEL, HOME, END, PAGE UP, PAGE DOWN, and arrow keys in the clusters to the left of the numeric keypad and the divide (/) and ENTER keys in the numeric keypad.</span></span>

## <a name="mouse-events"></a><span data-ttu-id="9e85d-126">Mausereignisse</span><span class="sxs-lookup"><span data-stu-id="9e85d-126">Mouse Events</span></span>

<span data-ttu-id="9e85d-127">Mausereignisse werden generiert, wenn der Benutzer die Maus bewegt oder eine der Maustasten drückt oder loslässt.</span><span class="sxs-lookup"><span data-stu-id="9e85d-127">Mouse events are generated whenever the user moves the mouse or presses or releases one of the mouse buttons.</span></span> <span data-ttu-id="9e85d-128">Mausereignisse werden nur dann in den Eingabepuffer eingefügt, wenn die folgenden Bedingungen erfüllt sind:</span><span class="sxs-lookup"><span data-stu-id="9e85d-128">Mouse events are placed in the input buffer only if the following conditions are met:</span></span>

- <span data-ttu-id="9e85d-129">Der Konsolen Eingabemodus ist so festgelegt, dass **\_ Maus \_ Eingaben** (Standardmodus) aktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="9e85d-129">The console input mode is set to **ENABLE\_MOUSE\_INPUT** (the default mode).</span></span>
- <span data-ttu-id="9e85d-130">Das Konsolenfenster hat den Tastaturfokus.</span><span class="sxs-lookup"><span data-stu-id="9e85d-130">The console window has the keyboard focus.</span></span>
- <span data-ttu-id="9e85d-131">Der Mauszeiger befindet sich innerhalb der Rahmen des Konsolenfensters.</span><span class="sxs-lookup"><span data-stu-id="9e85d-131">The mouse pointer is within the borders of the console's window.</span></span>

<span data-ttu-id="9e85d-132">Wenn es sich bei dem Eingabe Ereignis um ein Maus Ereignis handelt, ist das **Ereignis** Element im [**Eingabe \_ Daten Satz**](input-record-str.md) eine Daten Satzstruktur mit [**Maus \_ Ereignissen \_**](mouse-event-record-str.md) , die die folgenden Informationen enthält:</span><span class="sxs-lookup"><span data-stu-id="9e85d-132">If the input event is a mouse event, the **Event** member in [**INPUT\_RECORD**](input-record-str.md) is a [**MOUSE\_EVENT\_RECORD**](mouse-event-record-str.md) structure containing the following information:</span></span>

- <span data-ttu-id="9e85d-133">Die Koordinaten des Mauszeigers in Bezug auf die Zeichen Zellen Zeile und-Spalte im Koordinatensystem des Konsolenbildschirm Puffers.</span><span class="sxs-lookup"><span data-stu-id="9e85d-133">The coordinates of the mouse pointer in terms of the character-cell row and column in the console screen buffer's coordinate system.</span></span>
- <span data-ttu-id="9e85d-134">Eine Flag-Variable, die den Zustand der Maustasten angibt.</span><span class="sxs-lookup"><span data-stu-id="9e85d-134">A flag variable indicating the state of the mouse buttons.</span></span>
- <span data-ttu-id="9e85d-135">Eine Flag-Variable, die den Zustand der Steuerelement Tasten (alt, STRG, Umschalttaste, num-Sperre, Scrollsperre und Feststell Sperre) angibt und angibt, ob eine erweiterte Taste gedrückt wurde.</span><span class="sxs-lookup"><span data-stu-id="9e85d-135">A flag variable indicating the state of the control keys (ALT, CTRL, SHIFT, NUM LOCK, SCROLL LOCK, and CAPS LOCK) and indicating whether an enhanced key was pressed.</span></span> <span data-ttu-id="9e85d-136">Erweiterte Schlüssel für die Tastatur "IBM 101-Key" und "102-Key" sind die Tasten "ins", "del", "Start", "nach oben", "Bild-ab" und "Pfeiltasten" in den Clustern links neben der numerischen Tastatur und die "Division (/)" und "Eingabetaste".</span><span class="sxs-lookup"><span data-stu-id="9e85d-136">Enhanced keys for the IBM 101-key and 102-key keyboards are the INS, DEL, HOME, END, PAGE UP, PAGE DOWN, and arrow keys in the clusters to the left of the numeric keypad and the divide (/) and ENTER keys in the numeric keypad.</span></span>
- <span data-ttu-id="9e85d-137">Eine Flagvariable, die angibt, ob es sich bei dem Ereignis um ein normales Schaltflächen-oder Schaltflächen Freigabe Ereignis, ein Maus Verschiebungs Ereignis oder den zweiten Klick eines Doppelklick Ereignisses handelt.</span><span class="sxs-lookup"><span data-stu-id="9e85d-137">A flag variable indicating whether the event was a normal button-press or button-release event, a mouse movement event, or the second click of a double-click event.</span></span>

> [!NOTE]
><span data-ttu-id="9e85d-138">Die Maus Positionskoordinaten werden in Bezug auf den Bildschirm Puffer der Konsole, nicht im Konsolenfenster angezeigt.</span><span class="sxs-lookup"><span data-stu-id="9e85d-138">The mouse position coordinates are in terms of the console screen buffer, not the console window.</span></span> <span data-ttu-id="9e85d-139">Möglicherweise wurde für den Bildschirm Puffer ein Bildlauf in Bezug auf das Fenster durchgeführt, sodass die linke obere Ecke des Fensters nicht notwendigerweise die Koordinate (0,0) des Konsolenbildschirm Puffers ist.</span><span class="sxs-lookup"><span data-stu-id="9e85d-139">The screen buffer may have been scrolled with respect to the window, so the upper left corner of the window is not necessarily the (0,0) coordinate of the console screen buffer.</span></span> <span data-ttu-id="9e85d-140">Um die Koordinaten der Maus in Bezug auf das Koordinatensystem des Fensters zu ermitteln, subtrahieren Sie die Fenster Ursprungs Koordinaten von den Maus Positionskoordinaten.</span><span class="sxs-lookup"><span data-stu-id="9e85d-140">To determine the coordinates of the mouse relative to the coordinate system of the window, subtract the window origin coordinates from the mouse position coordinates.</span></span> <span data-ttu-id="9e85d-141">Verwenden Sie die [**getconsoleskreenbufferinfo**](getconsolescreenbufferinfo.md) -Funktion, um die Fenster Ursprungs Koordinaten zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="9e85d-141">Use the [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) function to determine the window origin coordinates.</span></span>

<span data-ttu-id="9e85d-142">Der **dwbuttonstate** -Member der [**\_ \_ Daten Satzstruktur des Maus Ereignisses**](mouse-event-record-str.md) hat ein Bit, das jeder Maustaste entspricht.</span><span class="sxs-lookup"><span data-stu-id="9e85d-142">The **dwButtonState** member of the [**MOUSE\_EVENT\_RECORD**](mouse-event-record-str.md) structure has a bit corresponding to each mouse button.</span></span> <span data-ttu-id="9e85d-143">Das Bit ist 1, wenn die Schaltfläche nicht gedrückt ist, und 0, wenn die Schaltfläche aktiv ist.</span><span class="sxs-lookup"><span data-stu-id="9e85d-143">The bit is 1 if the button is down and 0 if the button is up.</span></span> <span data-ttu-id="9e85d-144">Ein Schaltflächen Freigabe Ereignis wird durch einen 0-Wert für den **dweventflags** -Member des **Maus \_ Ereignis \_ Datensatzes** und eine Änderung des Bits einer Schaltfläche von 1 bis 0 erkannt.</span><span class="sxs-lookup"><span data-stu-id="9e85d-144">A button-release event is detected by a 0 value for the **dwEventFlags** member of **MOUSE\_EVENT\_RECORD** and a change in a button's bit from 1 to 0.</span></span> <span data-ttu-id="9e85d-145">Die [**getnumofconfiguration**](getnumberofconsolemousebuttons.md) Manager-Funktion Ruft die Anzahl der Schaltflächen auf der Maus ab.</span><span class="sxs-lookup"><span data-stu-id="9e85d-145">The [**GetNumberOfConsoleMouseButtons**](getnumberofconsolemousebuttons.md) function retrieves the number of buttons on the mouse.</span></span>

## <a name="buffer-resizing-events"></a><span data-ttu-id="9e85d-146">Ereignisse Buffer-Resizing</span><span class="sxs-lookup"><span data-stu-id="9e85d-146">Buffer-Resizing Events</span></span>

<span data-ttu-id="9e85d-147">Das Menü eines Konsolenfensters ermöglicht dem Benutzer das Ändern der Größe des aktiven Bildschirm Puffers. Diese Änderung generiert ein Ereignis mit Puffergröße.</span><span class="sxs-lookup"><span data-stu-id="9e85d-147">A console window's menu enables the user to change the size of the active screen buffer; this change generates a buffer-resizing event.</span></span> <span data-ttu-id="9e85d-148">Ereignisse zur Puffergröße werden im Eingabepuffer platziert, wenn der Eingabemodus der Konsole auf **\_ Fenster \_ Eingabe aktivieren** festgelegt ist (d. h., der Standardmodus ist deaktiviert).</span><span class="sxs-lookup"><span data-stu-id="9e85d-148">Buffer-resizing events are placed in the input buffer if the console's input mode is set to **ENABLE\_WINDOW\_INPUT** (that is, the default mode is disabled).</span></span>

<span data-ttu-id="9e85d-149">Handelt es sich bei dem Eingabe Ereignis um ein Puffergrößen Änderung-Ereignis, ist das **Ereignis** Element des [**Eingabe \_ Datensatzes**](input-record-str.md) eine [**\_ \_ \_ Daten Satzstruktur der Fensterpuffer Größe**](window-buffer-size-record-str.md) , die die neue Größe des Konsolenbildschirm Puffers in Zeichen Zellen Spalten und-Zeilen enthält.</span><span class="sxs-lookup"><span data-stu-id="9e85d-149">If the input event is a buffer-resizing event, the **Event** member of [**INPUT\_RECORD**](input-record-str.md) is a [**WINDOW\_BUFFER\_SIZE\_RECORD**](window-buffer-size-record-str.md) structure containing the new size of the console screen buffer, expressed in character-cell columns and rows.</span></span>

<span data-ttu-id="9e85d-150">Wenn der Benutzer die Größe des Bildschirm Puffers der Konsole reduziert, gehen alle Daten im verworfenen Teil des Puffers verloren.</span><span class="sxs-lookup"><span data-stu-id="9e85d-150">If the user reduces the size of the console screen buffer, any data in the discarded portion of the buffer is lost.</span></span>

<span data-ttu-id="9e85d-151">Änderungen an der Größe des Konsolenbildschirm Puffers als Ergebnis von Anwendungs Aufrufen der Funktion [**setconsoleskreenbuffersize**](setconsolescreenbuffersize.md) werden nicht als Ereignisse für die Puffergrößen Änderung generiert.</span><span class="sxs-lookup"><span data-stu-id="9e85d-151">Changes to the console screen buffer size as a result of application calls to the [**SetConsoleScreenBufferSize**](setconsolescreenbuffersize.md) function are not generated as buffer-resizing events.</span></span>