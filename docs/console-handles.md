---
title: Konsolenhandles
description: Ein Konsolen Prozess verwendet Handles, um auf die Eingabe-und Bildschirm Puffer der Konsole zuzugreifen, einschließlich der Funktionen "getstdhandle", "kreatefile" oder "feateconsoleskreenbuffer".
author: miniksa
ms.author: miniksa
ms.topic: conceptual
keywords: Konsole, Zeichenmodusanwendungen, Befehlszeilenanwendungen, Terminalanwendungen, Konsolen-API
MS-HAID:
- '\_win32\_console\_handles'
- base.console\_handles
- consoles.console\_handles
MSHAttr:
- PreferredSiteName:MSDN
- PreferredLib:/library/windows/desktop
ms.assetid: dc723046-b3e9-418a-b386-79be411e5ac8
ms.openlocfilehash: 29d25e83281c7c98c74ae4a0da03eea06dbf0077
ms.sourcegitcommit: 463975e71920908a6bff9a6a7291ddf3736652d5
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 10/30/2020
ms.locfileid: "93039228"
---
# <a name="console-handles"></a><span data-ttu-id="2163f-104">Konsolenhandles</span><span class="sxs-lookup"><span data-stu-id="2163f-104">Console Handles</span></span>

<span data-ttu-id="2163f-105">Ein Konsolen Prozess verwendet Handles, um auf die Eingabe-und Bildschirm Puffer der Konsole zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="2163f-105">A console process uses handles to access the input and screen buffers of its console.</span></span> <span data-ttu-id="2163f-106">Ein Prozess kann mit der [**getstdhandle**](getstdhandle.md)- [**, der**](https://msdn.microsoft.com/library/windows/desktop/aa363858)-oder der-Funktion oder der-Funktion von " [**kreateconsoleskreenbuffer**](createconsolescreenbuffer.md) " eines der folgenden Handles öffnen.</span><span class="sxs-lookup"><span data-stu-id="2163f-106">A process can use the [**GetStdHandle**](getstdhandle.md), [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858), or [**CreateConsoleScreenBuffer**](createconsolescreenbuffer.md) function to open one of these handles.</span></span>

<span data-ttu-id="2163f-107">Die [**getstdhandle**](getstdhandle.md) -Funktion bietet einen Mechanismus zum Abrufen der Standardeingabe ( `STDIN` ), der Standardausgabe ( `STDOUT` ) und der Standard-Fehler ( `STDERR` ) Handles, die einem Prozess zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="2163f-107">The [**GetStdHandle**](getstdhandle.md) function provides a mechanism for retrieving the standard input (`STDIN`), standard output (`STDOUT`), and standard error (`STDERR`) handles associated with a process.</span></span> <span data-ttu-id="2163f-108">Während der Konsolen Erstellung werden diese Handles vom System erstellt.</span><span class="sxs-lookup"><span data-stu-id="2163f-108">During console creation, the system creates these handles.</span></span> <span data-ttu-id="2163f-109">Anfänglich `STDIN` ist ein Handle für den Eingabepuffer der Konsole, und `STDOUT` und `STDERR` sind Handles des aktiven Bildschirm Puffers der Konsole.</span><span class="sxs-lookup"><span data-stu-id="2163f-109">Initially, `STDIN` is a handle to the console's input buffer, and `STDOUT` and `STDERR` are handles of the console's active screen buffer.</span></span> <span data-ttu-id="2163f-110">Die [**setstdhandle**](setstdhandle.md) -Funktion kann jedoch die Standard Handles umleiten, indem das Handle, das mit, oder verknüpft ist, geändert wird `STDIN` `STDOUT` `STDERR` .</span><span class="sxs-lookup"><span data-stu-id="2163f-110">However, the [**SetStdHandle**](setstdhandle.md) function can redirect the standard handles by changing the handle associated with `STDIN`, `STDOUT`, or `STDERR`.</span></span> <span data-ttu-id="2163f-111">Da die Standard Handles des übergeordneten Elements von einem beliebigen untergeordneten Prozess geerbt werden, geben nachfolgende Aufrufe von **getstdhandle** das umgeleitete Handle zurück.</span><span class="sxs-lookup"><span data-stu-id="2163f-111">Because the parent's standard handles are inherited by any child process, subsequent calls to **GetStdHandle** return the redirected handle.</span></span> <span data-ttu-id="2163f-112">Ein Handle, das von **getstdhandle** zurückgegeben wird, kann daher etwas anderes als Konsolen-e/a bezeichnen.</span><span class="sxs-lookup"><span data-stu-id="2163f-112">A handle returned by **GetStdHandle** may, therefore, refer to something other than console I/O.</span></span> <span data-ttu-id="2163f-113">Vor dem Erstellen eines untergeordneten Prozesses kann ein übergeordneter Prozess z. b. **setstdhandle** verwenden, um ein Pipehandle als Handle festzulegen, `STDIN` das vom untergeordneten Prozess geerbt wird.</span><span class="sxs-lookup"><span data-stu-id="2163f-113">For example, before creating a child process, a parent process can use **SetStdHandle** to set a pipe handle to be the `STDIN` handle that is inherited by the child process.</span></span> <span data-ttu-id="2163f-114">Wenn der untergeordnete Prozess **getstdhandle** aufruft, wird das Pipehandle abgerufen.</span><span class="sxs-lookup"><span data-stu-id="2163f-114">When the child process calls **GetStdHandle** , it gets the pipe handle.</span></span> <span data-ttu-id="2163f-115">Dies bedeutet, dass der übergeordnete Prozess die Standard Handles des untergeordneten Prozesses steuern kann.</span><span class="sxs-lookup"><span data-stu-id="2163f-115">This means that the parent process can control the standard handles of the child process.</span></span> <span data-ttu-id="2163f-116">Die von **getstdhandle** zurückgegebenen Handles haben `GENERIC_READ | GENERIC_WRITE` Zugriff, wenn **setstdhandle** nicht zum Festlegen des Standard Handles für einen geringeren Zugriff verwendet wurde.</span><span class="sxs-lookup"><span data-stu-id="2163f-116">The handles returned by **GetStdHandle** have `GENERIC_READ | GENERIC_WRITE` access unless **SetStdHandle** has been used to set the standard handle to have lesser access.</span></span>

<span data-ttu-id="2163f-117">Der Wert der von [**getstdhandle**](getstdhandle.md) zurückgegebenen Handles ist nicht 0, 1 und 2, sodass die standardmäßigen vordefinierten streamkonstanten in stdio. h ( `STDIN` , `STDOUT` und `STDERR` ) nicht in Funktionen verwendet werden können, die ein Konsolen handle erfordern.</span><span class="sxs-lookup"><span data-stu-id="2163f-117">The value of the handles returned by [**GetStdHandle**](getstdhandle.md) are not 0, 1, and 2, so the standard predefined stream constants in Stdio.h (`STDIN`, `STDOUT`, and `STDERR`) cannot be used in functions that require a console handle.</span></span>

<span data-ttu-id="2163f-118">Die [**Funktion**](https://msdn.microsoft.com/library/windows/desktop/aa363858) "-Funktion" ermöglicht einem Prozess, ein Handle für den Eingabepuffer und den aktiven Bildschirm Puffer der Konsole zu erhalten, auch wenn `STDIN` und `STDOUT` umgeleitet wurden.</span><span class="sxs-lookup"><span data-stu-id="2163f-118">The [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858) function enables a process to get a handle to its console's input buffer and active screen buffer, even if `STDIN` and `STDOUT` have been redirected.</span></span> <span data-ttu-id="2163f-119">Wenn Sie ein Handle für den Eingabepuffer einer Konsole öffnen möchten, geben Sie den `CONIN$` Wert in einem Aufrufen von " **anatefile** " an.</span><span class="sxs-lookup"><span data-stu-id="2163f-119">To open a handle to a console's input buffer, specify the `CONIN$` value in a call to **CreateFile** .</span></span> <span data-ttu-id="2163f-120">Geben Sie `CONOUT$` **den** Wert in einem aufzurufenden Befehl an, um ein Handle für den aktiven Bildschirm Puffer einer Konsole zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="2163f-120">Specify the `CONOUT$` value in a call to **CreateFile** to open a handle to a console's active screen buffer.</span></span> <span data-ttu-id="2163f-121">Mit " **anatefile** " können Sie den Lese-/Schreibzugriff des Handles angeben, das zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="2163f-121">**CreateFile** enables you to specify the read/write access of the handle that it returns.</span></span>

<span data-ttu-id="2163f-122">Die Funktion " [**kreateconsoleskreenbuffer**](createconsolescreenbuffer.md) " erstellt einen neuen Bildschirm Puffer und gibt ein Handle zurück.</span><span class="sxs-lookup"><span data-stu-id="2163f-122">The [**CreateConsoleScreenBuffer**](createconsolescreenbuffer.md) function creates a new screen buffer and returns a handle.</span></span> <span data-ttu-id="2163f-123">Dieses Handle kann in jeder Funktion verwendet werden, die ein Handle für die Konsolenausgabe akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="2163f-123">This handle can be used in any function that accepts a handle to console output.</span></span> <span data-ttu-id="2163f-124">Der neue Bildschirm Puffer ist nicht aktiv (angezeigt), bis sein Handle in einem Aufrufen der [**setconsoleactiveskreenbuffer**](setconsoleactivescreenbuffer.md) -Funktion angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="2163f-124">The new screen buffer is not active (displayed) until its handle is specified in a call to the [**SetConsoleActiveScreenBuffer**](setconsoleactivescreenbuffer.md) function.</span></span> <span data-ttu-id="2163f-125">Beachten Sie, dass sich das Ändern des aktiven Bildschirm Puffers nicht auf das von [**getstdhandle**](getstdhandle.md)zurückgegebene Handle auswirkt.</span><span class="sxs-lookup"><span data-stu-id="2163f-125">Note that changing the active screen buffer does not affect the handle returned by [**GetStdHandle**](getstdhandle.md).</span></span> <span data-ttu-id="2163f-126">Ebenso wirkt sich die Verwendung von [**setstdhandle**](setstdhandle.md) zum Ändern des `STDOUT` Handles nicht auf den aktiven Bildschirm Puffer aus.</span><span class="sxs-lookup"><span data-stu-id="2163f-126">Similarly, using [**SetStdHandle**](setstdhandle.md) to change the `STDOUT` handle does not affect the active screen buffer.</span></span>

<span data-ttu-id="2163f-127">Konsolen Handles, die von " [**kreatefile**](https://msdn.microsoft.com/library/windows/desktop/aa363858) " und " [**feateconsoleskreenbuffer**](createconsolescreenbuffer.md) " zurückgegeben werden, können in beliebigen Konsolenfunktionen verwendet werden, die ein Handle für den Eingabepuffer einer Konsole oder einen Konsolenbildschirm Puffer erfordern.</span><span class="sxs-lookup"><span data-stu-id="2163f-127">Console handles returned by [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858) and [**CreateConsoleScreenBuffer**](createconsolescreenbuffer.md) can be used in any of the console functions that require a handle to a console's input buffer or of a console screen buffer.</span></span> <span data-ttu-id="2163f-128">Handles, die von [**getstdhandle**](getstdhandle.md) zurückgegeben werden, können von den Konsolenfunktionen verwendet werden, wenn Sie nicht umgeleitet wurden, um auf etwas anderes als Konsolen-e/a zu verweisen.</span><span class="sxs-lookup"><span data-stu-id="2163f-128">Handles returned by [**GetStdHandle**](getstdhandle.md) can be used by the console functions if they have not been redirected to refer to something other than console I/O.</span></span> <span data-ttu-id="2163f-129">Wenn ein Standard handle umgeleitet wurde, um auf eine Datei oder eine Pipe zu verweisen, kann das Handle jedoch nur von den Funktionen "read [**File**](https://msdn.microsoft.com/library/windows/desktop/aa365467) " und " [**Write File**](https://msdn.microsoft.com/library/windows/desktop/aa365747) " verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="2163f-129">If a standard handle has been redirected to refer to a file or a pipe, however, the handle can only be used by the [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) and [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) functions.</span></span> <span data-ttu-id="2163f-130">[**Getfiletype**](https://docs.microsoft.com/windows/win32/api/fileapi/nf-fileapi-getfiletype) kann bei der Bestimmung des Gerätetyps helfen, auf den sich das Handle bezieht.</span><span class="sxs-lookup"><span data-stu-id="2163f-130">[**GetFileType**](https://docs.microsoft.com/windows/win32/api/fileapi/nf-fileapi-getfiletype) can assist in determining what device type the handle refers to.</span></span> <span data-ttu-id="2163f-131">Ein Konsolen Handle wird als dargestellt `FILE_TYPE_CHAR` .</span><span class="sxs-lookup"><span data-stu-id="2163f-131">A console handle presents as `FILE_TYPE_CHAR`.</span></span>

<span data-ttu-id="2163f-132">Ein Prozess kann die [**duplikatandle**](https://msdn.microsoft.com/library/windows/desktop/ms724251) -Funktion verwenden, um ein doppeltes Konsolen Handle zu erstellen, das über einen anderen Zugriff oder eine andere Vererbbarkeit als das ursprüngliche Handle verfügt.</span><span class="sxs-lookup"><span data-stu-id="2163f-132">A process can use the [**DuplicateHandle**](https://msdn.microsoft.com/library/windows/desktop/ms724251) function to create a duplicate console handle that has different access or inheritability from the original handle.</span></span> <span data-ttu-id="2163f-133">Beachten Sie jedoch, dass ein Prozess ein doppeltes Konsolen Handle nur für die eigene Verwendung erstellen kann.</span><span class="sxs-lookup"><span data-stu-id="2163f-133">Note, however, that a process can create a duplicate console handle only for its own use.</span></span> <span data-ttu-id="2163f-134">Dies unterscheidet sich von anderen handle-Typen (z. b. Datei-, Pipe-oder Mutex-Objekte), für die **duplikatandle** ein Duplikat erstellen kann, das für einen anderen Prozess gültig ist.</span><span class="sxs-lookup"><span data-stu-id="2163f-134">This differs from other handle types (such as file, pipe, or mutex objects), for which **DuplicateHandle** can create a duplicate that is valid for a different process.</span></span>
<span data-ttu-id="2163f-135">Der Zugriff auf eine-Konsole muss während der [Erstellung](creation-of-a-console.md) des anderen Prozesses freigegeben werden, oder Sie kann vom anderen Prozess über den [**attachconsole**](attachconsole.md) -Mechanismus angefordert werden.</span><span class="sxs-lookup"><span data-stu-id="2163f-135">Access to a console must be shared during [creation](creation-of-a-console.md) of the other process or may be requested by the other process through the [**AttachConsole**](attachconsole.md) mechanism.</span></span>

<span data-ttu-id="2163f-136">Ein Prozess kann die [**CloseHandle**](https://msdn.microsoft.com/library/windows/desktop/ms724211) -Funktion verwenden, um ein Konsolen Handle zu schließen.</span><span class="sxs-lookup"><span data-stu-id="2163f-136">To close a console handle, a process can use the [**CloseHandle**](https://msdn.microsoft.com/library/windows/desktop/ms724211) function.</span></span>
