---
title: Erstellung einer Konsole
description: Das System erstellt eine neue Konsole, wenn ein Konsolenprozess gestartet wird. Dabei handelt es sich um einen Prozess im Zeichenmodus, dessen Einstiegspunkt die main-Funktion ist.
author: miniksa
ms.author: miniksa
ms.topic: conceptual
keywords: Konsole, Zeichenmodusanwendungen, Befehlszeilenanwendungen, Terminalanwendungen, Konsolen-API
MS-HAID:
- '\_win32\_creation\_of\_a\_console'
- base.creation\_of\_a\_console
- consoles.creation\_of\_a\_console
MSHAttr:
- PreferredSiteName:MSDN
- PreferredLib:/library/windows/desktop
ms.assetid: 84ec2559-cade-447e-8594-5b824d3d3e81
ms.localizationpriority: high
ms.openlocfilehash: bf7993874c4f7c7031dbbcc9ce53a0610157eb75
ms.sourcegitcommit: 281eb1469f77ae4fb4c67806898e14eac440522a
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 02/14/2021
ms.locfileid: "100357920"
---
# <a name="creation-of-a-console"></a><span data-ttu-id="a14d8-104">Erstellung einer Konsole</span><span class="sxs-lookup"><span data-stu-id="a14d8-104">Creation of a Console</span></span>

<span data-ttu-id="a14d8-105">Das System erstellt eine neue Konsole, wenn ein *Konsolenprozess* gestartet wird. Dabei handelt es sich um einen Prozess im Zeichenmodus, dessen Einstiegspunkt die **main**-Funktion ist.</span><span class="sxs-lookup"><span data-stu-id="a14d8-105">The system creates a new console when it starts a *console process*, a character-mode process whose entry point is the **main** function.</span></span> <span data-ttu-id="a14d8-106">Beispielsweise erstellt das System eine neue Konsole, wenn es den Befehlsprozessor `cmd.exe` startet.</span><span class="sxs-lookup"><span data-stu-id="a14d8-106">For example, the system creates a new console when it starts the command processor `cmd.exe`.</span></span> <span data-ttu-id="a14d8-107">Wenn der Befehlsprozessor einen neuen Konsolenprozess startet, kann der Benutzer angeben, ob das System eine neue Konsole für den neuen Prozess erstellt oder ob es die Konsole des Befehlsprozessors erbt.</span><span class="sxs-lookup"><span data-stu-id="a14d8-107">When the command processor starts a new console process, the user can specify whether the system creates a new console for the new process or whether it inherits the command processor's console.</span></span>

<span data-ttu-id="a14d8-108">Ein Prozess kann eine Konsole mithilfe einer der folgenden Methoden erstellen:</span><span class="sxs-lookup"><span data-stu-id="a14d8-108">A process can create a console by using one of the following methods:</span></span>

- <span data-ttu-id="a14d8-109">Ein Prozess mit grafischer Benutzeroberfläche (GUI) oder ein Konsolenprozess kann die Funktion [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) mit **CREATE\_NEW\_CONSOLE** verwenden, um einen Konsolenprozess mit einer neuen Konsole zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="a14d8-109">A graphical user interface (GUI) or console process can use the [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) function with **CREATE\_NEW\_CONSOLE** to create a console process with a new console.</span></span> <span data-ttu-id="a14d8-110">(Standardmäßig erbt ein Konsolenprozess seine übergeordnete Konsole, und es lässt sich nicht sicherstellen, dass Eingaben von dem Prozess empfangen werden, für den sie bestimmt sind.)</span><span class="sxs-lookup"><span data-stu-id="a14d8-110">(By default, a console process inherits its parent's console, and there is no guarantee that input is received by the process for which it was intended.)</span></span>
- <span data-ttu-id="a14d8-111">Ein GUI- oder Konsolenprozess, der aktuell keiner Konsole zugeordnet ist, kann die Funktion [**AllocConsole**](allocconsole.md) verwenden, um eine neue Konsole zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="a14d8-111">A GUI or console process that is not currently attached to a console can use the [**AllocConsole**](allocconsole.md) function to create a new console.</span></span> <span data-ttu-id="a14d8-112">(GUI-Prozesse werden bei der Erstellung keiner Konsole zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="a14d8-112">(GUI processes are not attached to a console when they are created.</span></span> <span data-ttu-id="a14d8-113">Konsolenprozesse werden keiner Konsole zugeordnet, wenn sie mithilfe von [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) mit **DETACHED\_PROCESS** erstellt werden.)</span><span class="sxs-lookup"><span data-stu-id="a14d8-113">Console processes are not attached to a console if they are created using [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) with **DETACHED\_PROCESS**.)</span></span>

<span data-ttu-id="a14d8-114">Normalerweise verwendet ein Prozess [**AllocConsole**](allocconsole.md), um eine Konsole zu erstellen, wenn ein Fehler auftritt, der einen Benutzereingriff erfordert.</span><span class="sxs-lookup"><span data-stu-id="a14d8-114">Typically, a process uses [**AllocConsole**](allocconsole.md) to create a console when an error occurs requiring interaction with the user.</span></span> <span data-ttu-id="a14d8-115">Beispielsweise kann ein GUI-Prozess eine Konsole erstellen, wenn ein Fehler auftritt, der ihn daran hindert, seine normale grafische Oberfläche zu verwenden, oder ein Konsolenprozess, der normalerweise keine Benutzerinteraktion aufweist, kann eine Konsole erstellen, um einen Fehler anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="a14d8-115">For example, a GUI process can create a console when an error occurs that prevents it from using its normal graphical interface, or a console process that does not normally interact with the user can create a console to display an error.</span></span>

<span data-ttu-id="a14d8-116">Ein Prozess kann darüber hinaus eine Konsole durch Festlegen des Flags **CREATE\_NEW\_CONSOLE** in einem Aufruf von [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) erstellen.</span><span class="sxs-lookup"><span data-stu-id="a14d8-116">A process can also create a console by specifying the **CREATE\_NEW\_CONSOLE** flag in a call to [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa).</span></span> <span data-ttu-id="a14d8-117">Mit dieser Methode wird eine neue Konsole erstellt, die für den untergeordneten Prozess, aber nicht für den übergeordneten Prozess zugänglich ist.</span><span class="sxs-lookup"><span data-stu-id="a14d8-117">This method creates a new console that is accessible to the child process but not to the parent process.</span></span> <span data-ttu-id="a14d8-118">Separate Konsolen ermöglichen es übergeordneten und untergeordneten Prozessen, konfliktfrei mit dem Benutzer zu interagieren.</span><span class="sxs-lookup"><span data-stu-id="a14d8-118">Separate consoles enable both parent and child processes to interact with the user without conflict.</span></span> <span data-ttu-id="a14d8-119">Wenn dieses Flag beim Erstellen eines Prozesses nicht angegeben wird, werden beide Prozesse der gleichen Konsole zugeordnet, und es ist nicht sichergestellt, dass der richtige Prozess die für ihn bestimmten Eingaben empfängt.</span><span class="sxs-lookup"><span data-stu-id="a14d8-119">If this flag is not specified when a console process is created, both processes are attached to the same console, and there is no guarantee that the correct process will receive the input intended for it.</span></span> <span data-ttu-id="a14d8-120">Anwendungen können Verwirrung verhindern, indem sie untergeordnete Prozesse erstellen, die keine Handles vom Eingabepuffer erben, oder indem sie es jeweils nur einem untergeordneten Prozess ermöglichen, einen Eingabepufferhandle zu erben, während sie zugleich den übergeordneten Prozess am Lesen der Konsoleneingaben hindern, bis der untergeordnete Prozess beendet wurde.</span><span class="sxs-lookup"><span data-stu-id="a14d8-120">Applications can prevent confusion by creating child processes that do not inherit handles of the input buffer, or by enabling only one child process at a time to inherit an input buffer handle while preventing the parent process from reading console input until the child has finished.</span></span>

<span data-ttu-id="a14d8-121">Das Erstellen einer neuen Konsole führt zur Erstellung eines neuen Konsolenfensters sowie separater E/A-Bildschirmpuffer.</span><span class="sxs-lookup"><span data-stu-id="a14d8-121">Creating a new console results in a new console window, as well as separate I/O screen buffers.</span></span> <span data-ttu-id="a14d8-122">Der Prozess, der der neuen Konsole zugeordnet ist, verwendet die [**GetStdHandle**](getstdhandle.md)-Funktion, um die Handles der Eingabe- und Bildschirmpuffer der neuen Konsole abzurufen.</span><span class="sxs-lookup"><span data-stu-id="a14d8-122">The process associated with the new console uses the [**GetStdHandle**](getstdhandle.md) function to get the handles of the new console's input and screen buffers.</span></span> <span data-ttu-id="a14d8-123">Diese Handles ermöglichen es dem Prozess, auf die Konsole zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="a14d8-123">These handles enable the process to access the console.</span></span>

<span data-ttu-id="a14d8-124">Wenn ein Prozess [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) verwendet, kann er eine [**STARTUPINFO**](/windows/win32/api/processthreadsapi/ns-processthreadsapi-startupinfoa)-Struktur angeben, deren Elemente die Eigenschaften der ersten neuen Konsole steuern (sofern vorhanden), die für den untergeordneten Prozess erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="a14d8-124">When a process uses [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa), it can specify a [**STARTUPINFO**](/windows/win32/api/processthreadsapi/ns-processthreadsapi-startupinfoa) structure, whose members control the characteristics of the first new console (if any) created for the child process.</span></span> <span data-ttu-id="a14d8-125">Die im Aufruf von **CreateProcess** angegebene **STARTUPINFO**-Struktur wirkt sich auf eine erstellte Konsole aus, wenn das Flag **CREATE\_NEW\_CONSOLE** angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="a14d8-125">The **STARTUPINFO** structure specified in the call to **CreateProcess** affects a console created if the **CREATE\_NEW\_CONSOLE** flag is specified.</span></span> <span data-ttu-id="a14d8-126">Sie wirkt sich ebenfalls auf eine erstellte Konsole aus, wenn der untergeordnete Prozess anschließend [**AllocConsole**](allocconsole.md) verwendet.</span><span class="sxs-lookup"><span data-stu-id="a14d8-126">It also affects a console created if the child process subsequently uses [**AllocConsole**](allocconsole.md).</span></span> <span data-ttu-id="a14d8-127">Die folgenden Konsolenmerkmale können angegeben werden:</span><span class="sxs-lookup"><span data-stu-id="a14d8-127">The following console characteristics can be specified:</span></span>

- <span data-ttu-id="a14d8-128">Größe des neuen Konsolenfensters in Zeichenzellen</span><span class="sxs-lookup"><span data-stu-id="a14d8-128">Size of the new console window, in character cells</span></span>
- <span data-ttu-id="a14d8-129">Position des neuen Konsolenfensters in Bildschirmkoordinaten</span><span class="sxs-lookup"><span data-stu-id="a14d8-129">Location of the new console window, in screen pixel coordinates</span></span>
- <span data-ttu-id="a14d8-130">Größe des Bildschirmpuffers der neuen Konsole in Zeichenzellen</span><span class="sxs-lookup"><span data-stu-id="a14d8-130">Size of the new console's screen buffer, in character cells</span></span>
- <span data-ttu-id="a14d8-131">Attribute für Text- und Hintergrundfarbe des Bildschirmpuffers der neuen Konsole</span><span class="sxs-lookup"><span data-stu-id="a14d8-131">Text and background color attributes of the new console's screen buffer</span></span>
- <span data-ttu-id="a14d8-132">Anzeigename für die Titelleiste des neuen Konsolenfensters</span><span class="sxs-lookup"><span data-stu-id="a14d8-132">Display name for the title bar of the new console's window</span></span>

<span data-ttu-id="a14d8-133">Das System verwendet Standardwerte, wenn keine Werte für [**STARTUPINFO**](/windows/win32/api/processthreadsapi/ns-processthreadsapi-startupinfoa) angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="a14d8-133">The system uses default values if the [**STARTUPINFO**](/windows/win32/api/processthreadsapi/ns-processthreadsapi-startupinfoa) values are not specified.</span></span> <span data-ttu-id="a14d8-134">Ein untergeordneter Prozess kann die Funktion [**GetStartupInfo**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getstartupinfow) verwenden, um die Werte in seiner **STARTUPINFO**-Struktur zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="a14d8-134">A child process can use the [**GetStartupInfo**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getstartupinfow) function to determine the values in its **STARTUPINFO** structure.</span></span>

<span data-ttu-id="a14d8-135">Ein Prozess kann die Position seines Konsolenfensters auf dem Bildschirm nicht ändern, es stehen aber die folgenden Konsolenfunktionen zur Verfügung, um die anderen in der Struktur [**STARTUPINFO**](/windows/win32/api/processthreadsapi/ns-processthreadsapi-startupinfoa) angegebenen Eigenschaften festzulegen oder abzurufen.</span><span class="sxs-lookup"><span data-stu-id="a14d8-135">A process cannot change the location of its console window on the screen, but the following console functions are available to set or retrieve the other properties specified in the [**STARTUPINFO**](/windows/win32/api/processthreadsapi/ns-processthreadsapi-startupinfoa) structure.</span></span>

| <span data-ttu-id="a14d8-136">Funktion</span><span class="sxs-lookup"><span data-stu-id="a14d8-136">Function</span></span> | <span data-ttu-id="a14d8-137">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="a14d8-137">Description</span></span> |
|-|-|
| [<span data-ttu-id="a14d8-138">**GetConsoleScreenBufferInfo**</span><span class="sxs-lookup"><span data-stu-id="a14d8-138">**GetConsoleScreenBufferInfo**</span></span>](getconsolescreenbufferinfo.md) | <span data-ttu-id="a14d8-139">Ruft die Fenstergröße, die Größe des Bildschirmpuffers und die Farbattribute ab.</span><span class="sxs-lookup"><span data-stu-id="a14d8-139">Retrieves the window size, screen buffer size, and color attributes.</span></span> |
| [<span data-ttu-id="a14d8-140">**SetConsoleWindowInfo**</span><span class="sxs-lookup"><span data-stu-id="a14d8-140">**SetConsoleWindowInfo**</span></span>](setconsolewindowinfo.md)  | <span data-ttu-id="a14d8-141">Ändert die Größe des Konsolenfensters.</span><span class="sxs-lookup"><span data-stu-id="a14d8-141">Changes the size of the console window.</span></span>  |
| [<span data-ttu-id="a14d8-142">**SetConsoleScreenBufferSize**</span><span class="sxs-lookup"><span data-stu-id="a14d8-142">**SetConsoleScreenBufferSize**</span></span>](setconsolescreenbuffersize.md) | <span data-ttu-id="a14d8-143">Ändert die Größe des Bildschirmpuffers der Konsole.</span><span class="sxs-lookup"><span data-stu-id="a14d8-143">Changes the size of the console screen buffer.</span></span> |
| [<span data-ttu-id="a14d8-144">**SetConsoleTextAttribute**</span><span class="sxs-lookup"><span data-stu-id="a14d8-144">**SetConsoleTextAttribute**</span></span>](setconsoletextattribute.md) | <span data-ttu-id="a14d8-145">Legt die Farbattribute fest.</span><span class="sxs-lookup"><span data-stu-id="a14d8-145">Sets the color attributes.</span></span>  |
| [<span data-ttu-id="a14d8-146">**SetConsoleTitle**</span><span class="sxs-lookup"><span data-stu-id="a14d8-146">**SetConsoleTitle**</span></span>](setconsoletitle.md)  | <span data-ttu-id="a14d8-147">Legt den Titel des Konsolenfensters fest.</span><span class="sxs-lookup"><span data-stu-id="a14d8-147">Sets the console window title.</span></span> |
| [<span data-ttu-id="a14d8-148">**GetConsoleTitle**</span><span class="sxs-lookup"><span data-stu-id="a14d8-148">**GetConsoleTitle**</span></span>](getconsoletitle.md)  | <span data-ttu-id="a14d8-149">Ruft den Titel des Konsolenfensters ab.</span><span class="sxs-lookup"><span data-stu-id="a14d8-149">Retrieves the console window title.</span></span>  |

<span data-ttu-id="a14d8-150">Ein Prozess kann die Funktion [**FreeConsole**](freeconsole.md) verwenden, um sich von einer ererbten Konsole oder von einer mithilfe von [**AllocConsole**](allocconsole.md) erstellten Konsole zu trennen.</span><span class="sxs-lookup"><span data-stu-id="a14d8-150">A process can use the [**FreeConsole**](freeconsole.md) function to detach itself from an inherited console or from a console created by [**AllocConsole**](allocconsole.md).</span></span>

<span data-ttu-id="a14d8-151">Ein Prozess kann die Funktion [**AttachConsole**](attachconsole.md) verwenden, um sich nach der Verwendung von [**FreeConsole**](freeconsole.md) zum Zweck der Trennung von seiner eigenen Sitzung (oder wenn keine weitere zugeordnete Sitzung vorhanden ist), einer anderen vorhandenen Konsolensitzung zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="a14d8-151">A process can use the [**AttachConsole**](attachconsole.md) function to attach itself to another existing console session after using [**FreeConsole**](freeconsole.md) to detach from its own session (or if there is otherwise no attached session).</span></span>